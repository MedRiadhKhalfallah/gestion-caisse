<!-- BEGIN PAGE BREADCRUMB -->
<style>
    .print{display: none !important;}
    .no-print .table-bordered>tbody>tr>td,.no-print .table-bordered>tbody>tr>th,.no-print .table-bordered>tfoot>tr>td,.no-print .table-bordered>tfoot>tr>th, .no-print .table-bordered>thead>tr>td, .no-print .table-bordered>thead>tr>th {
        border: 1px solid #e7ecf1;
        font-size: 12px !important;
        font-weight: 600;
    }
    @media print and (color) {
        #footer{ 
            display: block !important;
            /*position: absolute;*/ 
            /*bottom: 10px;*/
            font-size: 9px !important;
            /*top: 4px;*/
            /*        right: 10%;
                    left: 10%;*/
        }
        .print{display: block !important;}
        .merci{margin-left: 30px !important;}
        .block_signature{position: relative;left: 180px !important;}
    }
</style>
<!-- END PAGE BREADCRUMB -->
<!-- BEGIN MAIN CONTENT -->
<div class="portlet box green-turquoise no-print">
    <div class="portlet-title no-print">
        <div style="width: 50px;float: left !important;" class="actions">
            <a href="javascript:history.go(-1)" class="btn btn-default btn-sm">
                <i class="fa fa-2x fa-arrow-left" aria-hidden="true"></i> 
            </a>
        </div>
        <div class="actions">
            <a class="no-print btn btn-success btn-sm" style="margin-right: 10px;background-color: transparent;border-color: #fff;" onclick=""><i class="fa fa-send-o"></i> Envoyer par mail </a>
            <a class="no-print btn btn-success btn-sm" style="margin-right: 10px;background-color: transparent;border-color: #fff;" onclick="print('block_border')"><i class="fa fa-print"></i> Imprimer </a>
            <button class="no-print btn btn-primary btn-sm" style="background-color: transparent;border-color: #fff;" onclick="generatePDF()"><i class="fa fa-file-pdf-o"></i> Exporter en PDF </button>
            <a href="#/dashboard.html" class="btn btn-default btn-sm">
                <i class="fa fa-align-right"></i> Dashboard
            </a>
            <a href="#/app-gestion-commercials" class="btn btn-default btn-sm">
                <i class="fa fa-align-right"></i> Gestion commerciale
            </a>
            <a href="javascript:history.go(+1)" class="btn btn-default btn-sm">
                <i class="fa fa-2x fa-arrow-right" aria-hidden="true"></i>  
            </a>
        </div>
    </div>
</div>
<div class="main-content print" id="block_border">
    <div class="main-content-inner">
        <!-- BEGIN EXAMPLE TABLE PORTLET-->
        <div class="portlet">
            <!--            <div class="portlet-title">  
                            <div class="caption">
                                <i class="fa fa-cogs"></i>View Facture </div>
                                            <div class="actions">
                                                <a href="javascript:;" class="btn btn-default btn-sm">
                                                    <i class="fa fa-plus"></i> Add </a>
                                                <a href="javascript:;" class="btn btn-default btn-sm">
                                                    <i class="fa fa-print"></i> Print </a>
                                            </div>
                        </div>-->
            <div class="col-md-12 portlets" style="width: 100%;margin: -10px 10px 10px 10px; background: #fff;">
                <!--<h3 class="rotationBlock" style="color: #24445c; position: absolute !important;" ng-controller="ErpCtrl"><strong>FACTURE <span my-current-time="format1"><span></strong><strong>-N°{{count}}</strong>-->
                <h3 class="rotationBlock" style="color: #24445c; position: absolute !important;" ng-controller="ErpCtrl"><strong>FACTURE: {{ref3}}- {{count}}</strong>
                </h3>
                <div class="panel-header panel-controls"> 
                    <!--                    <input type="text" ng-model="name" /> {{name | words}}-->
                    <!--<div class="col-md-10 pull-left" >-->
                    <h3 class="text-center DateFacture" style="color: #24445c;"><strong my-current-time="formatCreated"></strong>
                        <!--                    <span my-current-time="format"></span>-->

                    </h3>
                    <!--                        <br>-->
                    <!--<p my-current-time="format"></p>-->
                    <!--                    </div>-->
                    <div class="col-xs-5 PrintBlock">
                        <div  class="image" style="margin-left: 53px;">
                            <img src='https://api.amyevolution.com/img/logo/{{config.Configuration.logo}}' class="pull-left img-responsive logo-amyevolut" style="max-width:150px;margin-left: 15px;" />
                        </div>
                        <div class="clearfix"></div>
                        <div style="margin-top: -15px !important;" class=" text-center">
                            <h3 style="color:#26619c;font-size: 15px;"> 
                                <strong> {{config.Configuration.raison_social}} </strong>
                            </h3>  
                            <address class="text-center" style="font-size: 12px;">
                                <!--<strong style="color:#26619C;"> {{config.Configuration.raison_social}} </strong><br>-->
                                <strong style="color:#26619C;"> {{config.Configuration.telephone_1}} </strong><br>
                                <strong style="color:#26619C;"> {{config.Configuration.telephone_2}} </strong><br>
                                <strong style="color:#26619C;"> {{config.Configuration.telephone_3}} </strong><br>
                                <strong style="color:#26619C;"> {{config.Configuration.email}} </strong><br> 
                            </address>
                        </div>
                    </div>
                    <div class="col-xs-3 col-md-4"></div>
                    <!--                                    <h5 style="color:#26619C; text-align: right">Réf. Facture : <strong>{{facture.Facture.ref}}</strong></h5>-->
                    <!--                                    <h5 style="font-weight: 700;color:#26619c; text-align: right">Client: Code TVA:  <strong>{{facture.User.codetva}}</strong></h5>-->
                    <div class="col-xs-5 col-md-4 PrintBlock raisonSocial pull-right" style="font-size: 11px;margin-top: 80px;" ng-if="facture.User.type_client == 'Professionnel'"> 
                        <address  class="PrintBlock" style="padding-left: 55px; color:#26619c;">
                            <span style="line-height: 10px;"></span><strong style="position: relative;top: -40px;font-size: 15px;">Commercial: {{facture.Commercial.last_name}} {{facture.Commercial.first_name}}</strong><br>
                            <span style="line-height: 10px;"></span><strong style="position: relative;top: -40px;font-size: 15px;">Tel: {{facture.Commercial.phone}}</strong><br>
                            <span style="line-height: 10px;">Client: Code TVA: </span> <strong>{{facture.User.matricule}}/{{facture.User.codetva}}/{{facture.User.code_category}}/{{facture.User.num_etab}}</strong><br>
                            <span style="line-height: 10px;">Raison Sociale: </span><strong>{{facture.User.raison_social}}</strong><br>
                            <span style="line-height: 10px;">Interlocuteur: </span><strong>{{facture.User.full_name}}</strong><br>
                            <span style="line-height: 10px;">Adresse: </span><strong>{{facture.User.adress}}</strong><br>
                            <span style="line-height: 10px;">Code postal: </span><strong>{{facture.User.postal}}<span style="line-height: 10px;">   Ville: </span>{{facture.User.Ville.name}}</strong><br>
                            <span style="line-height: 10px;">Email: </span> <strong>{{facture.User.email}}</strong><br>
                            <span style="line-height: 10px;">Contact: +(216) </span> <strong>{{facture.User.phone}}</strong>
                        </address>
                    </div>
                    <div class="col-xs-5 col-md-4 PrintBlock raisonSocial pull-right" style="font-size: 11px;margin-top: 80px;" ng-if="facture.User.type_client == 'Particulier'"> 
                        <address  class="PrintBlock" style="padding-left: 55px; color:#26619c;">
                            <span style="line-height: 10px;">Nom et Prenom </span><strong>{{facture.User.full_name}}</strong><br>
                            <span style="line-height: 10px;">Adresse: </span><strong>{{facture.User.adress}}</strong><br>
                            <span style="line-height: 10px;">Code postal: </span><strong>{{facture.User.postal}}<span style="line-height: 10px;">   Ville: </span>{{facture.User.Ville.name}}</strong><br>
                            <span style="line-height: 10px;">Email: </span> <strong>{{facture.User.email}}</strong><br>
                            <span style="line-height: 10px;">Contact: +(216) </span> <strong>{{facture.User.phone}}</strong>
                        </address>
                    </div>
                </div>
                <div class="clearfix"></div>
                <p class="Object"><strong>Objet de Facture: </strong>{{facture.Facture.object}}</p>
                <div class="panel-content">
                    <table class="table table-bordered table-hover">
                        <thead>
                            <tr style="background: #F2F2F2">
                                <th>Ref</th>
                                <th>Désignation</th>
                                <th>Qte</th>
                                <th>R.%</th>
                                <th style="width: 68px;">Prix U.HT</th>
                                <th style="width: 68px;">Prix U.TTC</th>
                                <th style="width: 68px;">TOTAL HT</th>
                                <th style="width: 73px;">TOTAL TTC</th>
                                <th style="width: 40px;">TVA</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr ng-repeat="item in facture.Product">
                                <td style="width: 110px;">{{item.ref}}</td>
                                <td>{{item.name}}</td>
                                <td>{{item.FacturesProduct.qte}}</td>
                                <td>{{item.FacturesProduct.remise}}%</td>
                                <td>{{item.FacturesProduct.last_unit_price * (1 - item.FacturesProduct.remise / 100) | number:3}}</td>
                                <td>{{item.FacturesProduct.last_unit_price * (1 + item.Tva.value / 100) * (1 - item.FacturesProduct.remise / 100) | number:3}}</td>
                                <td>{{item.FacturesProduct.last_unit_price * item.FacturesProduct.qte * (1 - item.FacturesProduct.remise / 100) | number:3}}</td>
                                <td>{{item.FacturesProduct.last_unit_price * (1 + item.Tva.value / 100) * item.FacturesProduct.qte * (1 - item.FacturesProduct.remise / 100) | number:3}}</td>
                                <td>{{item.Tva.name}}</td>
                            </tr>
                            <tr>
                                <td class='factureNone' style="border-left: 1px solid #fff !important;border-top: 1px solid #fff !important;border-bottom:  1px solid #fff !important;"  colspan='5'></td>
                                <td class='text-right' colspan='2'><strong>Total HT</strong></td>
                                <td colspan='2'> {{total_ht_net| number:3}}</td>
                            </tr>
                            <tr>
                                <td class='factureNone' style="border-left: 1px solid #fff !important;border-top: 1px solid #fff !important;border-bottom:  1px solid #fff !important;"  colspan='5'></td>
                                <td class='text-right' colspan='2'><strong>Remise G. {{facture.Facture.remise_globale}} %</strong></td>
                                <td colspan='2'> {{total_ht_net * (facture.Facture.remise_globale / 100) + remiseProduit | number
                                            :3}}</td>
                            </tr>
                            <!--                            <tr>
                                                            <td class='factureNone' style="border-left: 1px solid #fff !important;border-top: 1px solid #fff !important;border-bottom:  1px solid #fff !important;"  colspan='5'></td>
                                                            <td class='text-right' colspan='2'><strong>Remise Produits</strong></td>
                                                            <td colspan='2'> {{remiseProduit| number:3}}</td>
                                                        </tr>-->
                            <tr>
                                <td class='factureNone' style="border-left: 1px solid #fff !important;border-top: 1px solid #fff !important;border-bottom:  1px solid #fff !important;"  colspan='5'></td>
                                <td class='text-right' colspan='2'><strong>Total NET HT</strong></td>
                                <td colspan='2'> {{total_ht| number:3}}</td>
                            </tr>
                            <tr>
                                <td class='factureNone' style="border-left: 1px solid #fff !important;border-top: 1px solid #fff !important;border-bottom:  1px solid #fff !important;"  colspan='5'></td>
                                <td class='text-right' colspan='2'><strong>Total Tva</strong></td>
                                <td colspan='2'>{{total_tva| number:3}}</td>
                            </tr>
                            <tr>
                                <td class='factureNone' style="border-left: 1px solid #fff !important;border-top: 1px solid #fff !important;border-bottom:  1px solid #fff !important;"  colspan='5'></td>
                                <td class='text-right' colspan='2'><strong>Timbre Fiscal</strong></td>
                                <td colspan='2'>{{config.Configuration.price_timbre| number:3}}</td>
                            </tr>
                            <tr>
                                <td class='factureNone' style="border-left: 1px solid #fff !important;border-top: 1px solid #fff !important;border-bottom:  1px solid #fff !important;"  colspan='5'></td>
                                <td class='text-right' colspan='2'><strong>NET À PAYER TTC</strong></td>
                                <td colspan='2'>{{total_tva + total_ht - ( - facture.Facture.last_timbre_price) | number
                                            :3}}</td>
                            </tr>
                        </tbody>
                    </table>
                    <div class="col-xs-7 col-sm-7 col-md-4" style="padding: 0; margin-top: -160px;">
                        <table class="table table-bordered table-hover">
                            <thead>
                                <tr>
                                    <th>Base HT</th>
                                    <th>Taux TVA</th>
                                    <th>Montant TVA</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr ng-repeat="tva in taux">
                                    <td>{{tva.price_ht}}</td>
                                    <td>{{tva.taux}}</td>
                                    <td>{{tva.mantant}}</td>
                                </tr>
                                <tr>
                                    <td colspan="2">
                                        <strong  class="text-left">Total</strong>
                                    <td>{{total_tva| number:3}}</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                <div class="clearfix"></div>
                <!--<span style="text-decoration: line-through;">{{total_ttc - total_ht| number:3}} </span>-->
                <div style="margin-top: 100px;font-size: 12px; position: relative; left: -20px !important;" class="validation">
                    <strong> * Validité de l'offre :</strong> {{facture.Facture.validate}} 
                    <br> 
                    <h4 style="margin-bottom: -12px; margin-top: 0px !important;margin-left: 1px; display: none;" class="displayBlock" >* {{facture.Facture.pourcentage}}</h4>
                    <p class="text-left displayBlock" style="display: none;  width: 450px !important; margin-left: 250px !important; margin-top: 0px !important;">* Arrêté la pésente facture à la somme de {{totalFinalText}} TTC </p>

                </div>
                <p class="text-center SommeText" >Arrêté la présente facture à la somme de {{totalFinalText}} TTC </p>
                <!--<p class="text-center">Arrêté le présent facture à la somme de {{totalFinal[0]| words}} Dinars et {{totalFinal[1]| words}} Millimes TTC </p>-->
                <div class="footerCommande">
                    <div style="color:#26619c;margin-top: -5px;" class="Condition">
                        <!--<span style="font-size: 10px;">CONDITIONS & MODES DE PAIEMENT</span><br>-->
                        <h4 style="margin-bottom: -12px;" class="Pourcentage position">{{facture.Facture.pourcentage}}</h4><br>
                        <strong><input type="checkbox"/>Virement bancaire * </strong> <span>Veuillez nous envoyer l'avis d'opéré sur {{config.Configuration.email}}</span><br>
                        <strong><input type="checkbox"/> Chéque * </strong> <span>Veuillez le mettre à l'ordre de {{config.Configuration.name}}</span><br>
                        <strong><input type="checkbox"/> Espéce </strong>  
                    </div>
                    <div class="col-xs-12 PourcentageDevis " style="margin-left: 35px;">
                        <div style="border: 1px solid #95d5f5; margin-left: -50px;margin-top: 10px; color: #2E8B57; " class="col-xs-6 PourcentageDevis col-md-4 block_border border-color">
                            * RIB BANCAIRE: {{config.Configuration.rib}}<br>
                            * {{config.Configuration.banque}}<br>
                            * IBAN: {{config.Configuration.iban}}<br>
                            * CODE SWIFT: {{config.Configuration.swift}}
                        </div>
                        <!--<div class="col-md-3"> </div>-->

                        <div style="border: 1px solid #95d5f5; width: 242px;height: 95px;margin-top: 10px; margin-right: 55px;" class="col-xs-4 pull-right text-center block_border">
                            <span style="position: relative; top: 78%;  color: #2E8B57;"> Signature Client</span>
                        </div>
                    </div>
                    <div class="text-center merci" style=" color: #2E8B57;top: 18px; position: relative;"> 
                        En cas d'accord de la présente facture, merci de nous le retouner signé et cacheté.
                    </div>
                    <div>
                        <address class="text-center no-print" style=" top: 25px; position: relative; font-size: 10px;" >
                            {{config.Configuration.name}}<br>
                            RC: {{config.Configuration.rc}} M.F: {{config.Configuration.matricule_fiscale}}<br>
                            Siége Social: {{config.Configuration.siege}}  Agence: {{config.Configuration.agence}}<br>
                            {{config.Configuration.email}}  Tel: +(216) {{config.Configuration.telephone_2}}  +(33) {{config.Configuration.telephone_3}}<br>
                        </address>        
                    </div>
                </div>
                <div class="clearfix"></div>
            </div>
        </div>
    </div>
    <div class="cb no-print"></div><br>
</div>
<div class="main-content no-print" id="block_border">
    <div class="main-content-inner">
        <!-- BEGIN EXAMPLE TABLE PORTLET-->
        <div class="portlet">
            <!--            <div class="portlet-title">  
                            <div class="caption">
                                <i class="fa fa-cogs"></i>View Facture </div>
                                            <div class="actions">
                                                <a href="javascript:;" class="btn btn-default btn-sm">
                                                    <i class="fa fa-plus"></i> Add </a>
                                                <a href="javascript:;" class="btn btn-default btn-sm">
                                                    <i class="fa fa-print"></i> Print </a>
                                            </div>
                        </div>-->
            <div class="col-md-12 portlets" style="width: 100%;margin-top: -20px; background: #fff;">
                <!--<h3 class="rotationBlock" style="color: #24445c; position: absolute !important;" ng-controller="ErpCtrl"><strong>FACTURE <span my-current-time="format1"><span></strong><strong>-N°{{count}}</strong>-->
                <h3 class="rotationBlock" style="color: #24445c; position: absolute !important;" ng-controller="ErpCtrl"><strong>FACTURE: {{ref3}}- {{count}}</strong>
                </h3>
                <div class="panel-header panel-controls"> 
                    <!--                    <input type="text" ng-model="name" /> {{name | words}}-->
                    <!--<div class="col-md-10 pull-left" >-->
                    <h3 class="text-center DateFacture" style="color: #24445c;"><strong my-current-time="formatCreated"></strong>
                        <!--                    <span my-current-time="format"></span>-->

                    </h3>
                    <!--                        <br>-->
                    <!--<p my-current-time="format"></p>-->
                    <!--                    </div>-->
                    <div class="col-xs-5 PrintBlock">
                        <div  class="image" style="margin-left: 53px;">
                            <img src='https://api.amyevolution.com/img/logo/{{config.Configuration.logo}}' class="pull-left img-responsive logo-amyevolut" style="max-width:150px;margin-left: 15px;" />
                        </div>
                        <div class="clearfix"></div>
                        <div style="margin-top: -15px !important;" class=" text-center">
                            <h3 style="color:#26619c;font-size: 15px;"> 
                                <strong> {{config.Configuration.raison_social}} </strong>
                            </h3>  
                            <address class="text-center" style="font-size: 12px;">
                                <!--<strong style="color:#26619C;"> {{config.Configuration.raison_social}} </strong><br>-->
                                <strong style="color:#26619C;"> {{config.Configuration.telephone_1}} </strong><br>
                                <strong style="color:#26619C;"> {{config.Configuration.telephone_2}} </strong><br>
                                <strong style="color:#26619C;"> {{config.Configuration.telephone_3}} </strong><br>
                                <strong style="color:#26619C;"> {{config.Configuration.email}} </strong><br> 
                            </address>
                        </div>
                    </div>
                    <div class="col-xs-3 col-md-4"></div>
                    <!--                                    <h5 style="color:#26619C; text-align: right">Réf. Facture : <strong>{{facture.Facture.ref}}</strong></h5>-->
                    <!--                                    <h5 style="font-weight: 700;color:#26619c; text-align: right">Client: Code TVA:  <strong>{{facture.User.codetva}}</strong></h5>-->
                    <div class="col-xs-5 col-md-4 PrintBlock raisonSocial pull-right" style="font-size: 11px;margin-top: 80px;" ng-if="facture.User.type_client == 'Professionnel'"> 
                        <address  class="PrintBlock" style="padding-left: 55px; color:#26619c;">
                            <span style="line-height: 10px;"></span><strong style="position: relative;top: -40px;font-size: 15px;">Commercial: {{facture.Commercial.last_name}} {{facture.Commercial.first_name}}</strong><br>
                            <span style="line-height: 10px;"></span><strong style="position: relative;top: -40px;font-size: 15px;">Tel: {{facture.Commercial.phone}}</strong><br>
                            <span style="line-height: 10px;">Client: Code TVA: </span> <strong>{{facture.User.matricule}}/{{facture.User.codetva}}/{{facture.User.code_category}}/{{facture.User.num_etab}}</strong><br>
                            <span style="line-height: 10px;">Raison Sociale: </span><strong>{{facture.User.raison_social}}</strong><br>
                            <span style="line-height: 10px;">Interlocuteur: </span><strong>{{facture.User.full_name}}</strong><br>
                            <span style="line-height: 10px;">Adresse: </span><strong>{{facture.User.adress}}</strong><br>
                            <span style="line-height: 10px;">Code postal: </span><strong>{{facture.User.postal}}<span style="line-height: 10px;">   Ville: </span>{{facture.User.Ville.name}}</strong><br>
                            <span style="line-height: 10px;">Email: </span> <strong>{{facture.User.email}}</strong><br>
                            <span style="line-height: 10px;">Contact: +(216) </span> <strong>{{facture.User.phone}}</strong>
                        </address>
                    </div>
                    <div class="col-xs-5 col-md-4 PrintBlock raisonSocial pull-right" style="font-size: 11px;margin-top: 80px;" ng-if="facture.User.type_client == 'Particulier'"> 
                        <address  class="PrintBlock" style="padding-left: 55px; color:#26619c;">
                            <span style="line-height: 10px;">Nom et Prenom </span><strong>{{facture.User.full_name}}</strong><br>
                            <span style="line-height: 10px;">Adresse: </span><strong>{{facture.User.adress}}</strong><br>
                            <span style="line-height: 10px;">Code postal: </span><strong>{{facture.User.postal}}<span style="line-height: 10px;">   Ville: </span>{{facture.User.Ville.name}}</strong><br>
                            <span style="line-height: 10px;">Email: </span> <strong>{{facture.User.email}}</strong><br>
                            <span style="line-height: 10px;">Contact: +(216) </span> <strong>{{facture.User.phone}}</strong>
                        </address>
                    </div>
                </div>
                <div class="clearfix"></div>
                <p class="Object"><strong>Objet de Facture: </strong>{{facture.Facture.object}}</p>
                <div class="panel-content">
                    <table class="table table-bordered table-hover">
                        <thead>
                            <tr style="background: #F2F2F2">
                                <th>Ref</th>
                                <th>Désignation</th>
                                <th>Qte</th>
                                <th>R.%</th>
                                <th>Prix U.HT</th>
                                <th>Prix U.TTC</th>
                                <th>TOTAL HT</th>
                                <th>TOTAL TTC</th>
                                <th style="width: 55px;">TVA</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr ng-repeat="item in facture.Product">
                                <td style="width: 200px;">{{item.ref}}</td>
                                <td>{{item.name}}</td>
                                <td>{{item.FacturesProduct.qte}}</td>
                                <td>{{item.FacturesProduct.remise}}%</td>
                                <td>{{item.FacturesProduct.last_unit_price * (1 - item.FacturesProduct.remise / 100) | number:3}}</td>
                                <td>{{item.FacturesProduct.last_unit_price * (1 + item.Tva.value / 100) * (1 - item.FacturesProduct.remise / 100) | number:3}}</td>
                                <td>{{item.FacturesProduct.last_unit_price * item.FacturesProduct.qte * (1 - item.FacturesProduct.remise / 100) | number:3}}</td>
                                <td>{{item.FacturesProduct.last_unit_price * (1 + item.Tva.value / 100) * item.FacturesProduct.qte * (1 - item.FacturesProduct.remise / 100) | number:3}}</td>
                                <td>{{item.Tva.name}}</td>
                            </tr>
                            <tr>
                                <td class='factureNone' style="border-left: 1px solid #fff !important;border-top: 1px solid #fff !important;border-bottom:  1px solid #fff !important;"  colspan='5'></td>
                                <td class='text-right' colspan='2'><strong>Total HT</strong></td>
                                <td colspan='2'> {{total_ht_net| number:3}}</td>
                            </tr>
                            <tr>
                                <td class='factureNone' style="border-left: 1px solid #fff !important;border-top: 1px solid #fff !important;border-bottom:  1px solid #fff !important;"  colspan='5'></td>
                                <td class='text-right' colspan='2'><strong>Remise G. {{facture.Facture.remise_globale}} %</strong></td>
                                <td colspan='2'> {{total_ht_net * (facture.Facture.remise_globale / 100) + remiseProduit | number
                                            :3}}</td>
                            </tr>
                            <!--                            <tr>
                                                            <td class='factureNone' style="border-left: 1px solid #fff !important;border-top: 1px solid #fff !important;border-bottom:  1px solid #fff !important;"  colspan='5'></td>
                                                            <td class='text-right' colspan='2'><strong>Remise Produits</strong></td>
                                                            <td colspan='2'> {{remiseProduit| number:3}}</td>
                                                        </tr>-->
                            <tr>
                                <td class='factureNone' style="border-left: 1px solid #fff !important;border-top: 1px solid #fff !important;border-bottom:  1px solid #fff !important;"  colspan='5'></td>
                                <td class='text-right' colspan='2'><strong>Total NET HT</strong></td>
                                <td colspan='2'> {{total_ht| number:3}}</td>
                            </tr>
                            <tr>
                                <td class='factureNone' style="border-left: 1px solid #fff !important;border-top: 1px solid #fff !important;border-bottom:  1px solid #fff !important;"  colspan='5'></td>
                                <td class='text-right' colspan='2'><strong>Total Tva</strong></td>
                                <td colspan='2'>{{total_tva| number:3}}</td>
                            </tr>
                            <tr>
                                <td class='factureNone' style="border-left: 1px solid #fff !important;border-top: 1px solid #fff !important;border-bottom:  1px solid #fff !important;"  colspan='5'></td>
                                <td class='text-right' colspan='2'><strong>Timbre Fiscal</strong></td>
                                <td colspan='2'>{{config.Configuration.price_timbre| number:3}}</td>
                            </tr>
                            <tr>
                                <td class='factureNone' style="border-left: 1px solid #fff !important;border-top: 1px solid #fff !important;border-bottom:  1px solid #fff !important;"  colspan='5'></td>
                                <td class='text-right' colspan='2'><strong>NET À PAYER TTC</strong></td>
                                <td colspan='2'>{{total_tva + total_ht - ( - facture.Facture.last_timbre_price) | number
                                            :3}}</td>
                            </tr>
                        </tbody>
                    </table>
                    <div class="col-xs-7 col-sm-7 col-md-4" style="padding: 0; margin-top: -160px;">
                        <table class="table table-bordered table-hover">
                            <thead>
                                <tr>
                                    <th>Base HT</th>
                                    <th>Taux TVA</th>
                                    <th>Montant TVA</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr ng-repeat="tva in taux">
                                    <td>{{tva.price_ht}}</td>
                                    <td>{{tva.taux}}</td>
                                    <td>{{tva.mantant}}</td>
                                </tr>
                                <tr>
                                    <td colspan="2">
                                        <strong  class="text-left">Total</strong>
                                    <td>{{total_tva| number:3}}</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                <div class="clearfix"></div>
                <!--<span style="text-decoration: line-through;">{{total_ttc - total_ht| number:3}} </span>-->
                <div style="margin-top: 100px;font-size: 12px; position: relative; left: 20px !important;" class="validation">
                    <strong> * Validité de l'offre :</strong> {{facture.Facture.validate}} 
                    <br> 
                    <h4 style="margin-bottom: -12px; margin-top: 0px !important;margin-left: 1px; display: none;" class="displayBlock" >* {{facture.Facture.pourcentage}}</h4>
                    <p class="text-left displayBlock" style="display: none;  width: 450px !important; margin-left: 250px !important; margin-top: 0px !important;">* Arrêté la pésente facture à la somme de {{totalFinalText}} TTC </p>

                </div>
                <p class="text-center SommeText" >Arrêté la présente facture à la somme de {{totalFinalText}} TTC </p>
                <!--<p class="text-center">Arrêté le présent facture à la somme de {{totalFinal[0]| words}} Dinars et {{totalFinal[1]| words}} Millimes TTC </p>-->
                <div class="footerCommande">
                    <div style="color:#000;margin-top: -5px;font-size: 12px;font-weight: 600;" class="Condition">
                        <!--<span style="font-size: 10px;">CONDITIONS & MODES DE PAIEMENT</span><br>-->
                        <h4 style="margin-bottom: -12px;" class="Pourcentage position">{{facture.Facture.pourcentage}}</h4><br>
                        <strong><input type="checkbox"/>Virement bancaire * </strong> <span>Veuillez nous envoyer l'avis d'opéré sur {{config.Configuration.email}}</span><br>
                        <strong><input type="checkbox"/> Chéque * </strong> <span>Veuillez le mettre à l'ordre de {{config.Configuration.name}}</span><br>
                        <strong><input type="checkbox"/> Espéce </strong>  
                    </div>
                    <div class="col-xs-12 PourcentageDevis " style="">
                        <div style="border: 1px solid #95d5f5; margin-top: 10px;font-size: 12px;font-weight: 600; color: #2699DC !important  " class="col-xs-6 PourcentageDevis col-md-4 block_border border-color">
                            * RIB BANCAIRE: {{config.Configuration.rib}}<br>
                            * {{config.Configuration.banque}}<br>
                            * IBAN: {{config.Configuration.iban}}<br>
                            * CODE SWIFT: {{config.Configuration.swift}}
                        </div>
                        <!--<div class="col-md-3"> </div>-->

                        <div style="border: 1px solid #95d5f5; width: 242px;height: 95px;margin-top: 10px; margin-right: 55px;" class="col-xs-4 pull-right text-center block_border">
                            <span style="position: relative; top: 78%;  color: #2699DC !important"> Signature Client</span>
                        </div>
                    </div>
                    <div class="text-center merci" style="top: 18px;font-weight: 600; position: relative;"> 
                        En cas d'accord de la présente facture, merci de nous le retouner signé et cacheté.
                    </div>
                    <div>
                        <address class="text-center no-print" style="top: 25px;font-weight: 600; position: relative; font-size: 11px;margin-bottom: 45px;" >
                            {{config.Configuration.name}}<br>
                            RC: {{config.Configuration.rc}} M.F: {{config.Configuration.matricule_fiscale}}<br>
                            Siége Social: {{config.Configuration.siege}}  Agence: {{config.Configuration.agence}}<br>
                            {{config.Configuration.email}}  Tel: +(216) {{config.Configuration.telephone_2}}  +(33) {{config.Configuration.telephone_3}}<br>
                        </address>        
                    </div>
                </div>
                <div class="clearfix"></div>
            </div>
        </div>
    </div>
    <div class="cb no-print"></div><br>
</div>
<script>
            var userAgent = navigator.userAgent;
            if (userAgent.indexOf("Chrome") > - 1) {
    //Add Print for Chrome
    $("head").append(" <link href='" + base_url() + "assets/pages/css/print_chrome.css' rel='stylesheet' type='text/css' />")
    }
    if (userAgent.indexOf("Firefox") > - 1) {
    //Add Print for Firefox
    $("head").append(" <link href='" + base_url() + "assets/pages/css/print_firefox.css' rel='stylesheet' type='text/css' />")

    }
    if (userAgent.indexOf("Firefox") === - 1 && userAgent.indexOf("Chrome") === - 1) {
    //Add Print for Any Browser
    $("head").append(" <link href='" + base_url() + "assets/pages/css/print_other.css' rel='stylesheet' type='text/css' />")
    }
//            setTimeout(function(){
//            var ifPageBreak = $("#listItem tr:eq(9)").length;
//                    if (ifPageBreak === 1) {
//            $("#listItem tr:eq(9)").attr('class', 'ng-scope page-break');
//            }
//            },1000);
//var ifRefresh = sessionStorage.getItem('ifRefresh');
//var currentUrl = document.location.href;
//console.log(ifRefresh);
//console.log(ifRefresh == null);
//console.log(ifRefresh === null);
//console.log(ifRefresh === 'null');
//if (ifRefresh == null || ifRefresh === 'null'){
//    document.location.reload(currentUrl);
//    sessionStorage.setItem('ifRefresh', 'refreshed');
//}
</script>
