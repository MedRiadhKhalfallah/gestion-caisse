<style>
    .input-group .select2-container--bootstrap{
        width: 100% !important;
    }
    .custom-combobox {
        position: relative;
        display: inline-block;
        width: 90% !important;
    }
    .custom-combobox-toggle {
        position: absolute;
        top: 0;
        bottom: 0;
        margin-left: -1px;
        padding: 0;
    }
    .custom-combobox-input {
        margin: 0;
        padding: 5px 10px;
        width: 100%;
    }
    .portlet.box.green-turquoise{border: none;}
    @media print and (color) {
        #footer{ 
            display: block !important;
            /*position: absolute;*/ 
            /*bottom: 10px;*/
            font-size: 9px !important;
            /*top: 4px;*/
            /*        right: 10%;
                    left: 10%;*/
        }
        tr.MarginTR{
            /*margin-top: 130px !important;*/
            clear: both;
            /*border: solid #000 2px !important;*/
        }
        blockquote,ul,ol {
            page-break-inside: avoid;
        }
        h1,h2,h3,caption {
            page-break-after: avoid;
        }

        /* 5. Affichage des liens */
        #content a:after {
            content: " » " attr(href) " ";
        }
        .Condition, PourcentageDevis, block_signature{display: none !important;}
        .PourcentageDevis{display: none !important;}
        .block_signature{display: none !important;}
        .merci{display: none !important;}
    }
</style>
<!-- END PAGE BREADCRUMB -->
<!-- BEGIN MAIN CONTENT -->
<!--<div class="row">-->
<!--<div class="col-md-12">-->
<!-- BEGIN PORTLET-->
<div class="portlet box green-turquoise">
    <div class="portlet-title no-print">
        <div style="width: 50px;float: left !important;" class="actions">
            <a href="javascript:history.go(-1)" class="btn btn-default btn-sm">
                <i class="fa fa-2x fa-arrow-left" aria-hidden="true"></i> 
            </a>
        </div>
        <div class="caption">
            <div id="breadcrumb">
                <ul>
                    <li><span style="color: #aaa"><strong>Demande de prix</strong></span><span class="end">&nbsp;</span></li>
                    <li><span style="color: #aaa"><strong>Confirmer commande</strong></span><span class="end">&nbsp;</span></li>
                    <li class="first"><a href="#" title="Back to item1" style="text-decoration: none;"><strong>Bon de réception</strong></a><span class="end">&nbsp;</span></li>
                    <!--<li><a href="#" title="Back to item 2">item 2</a><span class="end">&nbsp;</span></li>-->
                    <li><span style="color: #aaa"><strong>Facture d'achat</strong></span><span class="end">&nbsp;</span></li>
                </ul>
            </div>
        </div> 
        <div class="actions">
            <a class="no-print btn btn-success btn-sm" style="margin-right: 10px;background-color: transparent;border-color: #fff;" onclick=""><i class="fa fa-send-o"></i> Envoyer par mail </a>
            <a class="no-print btn btn-success btn-sm" style="margin-right: 10px;background-color: transparent;border-color: #fff;" onclick="print('block_border')"><i class="fa fa-print"></i> Imprimer </a>
            <button class="no-print btn btn-primary btn-sm" style="background-color: transparent;border-color: #fff;" onclick="generatePDF()"><i class="fa fa-file-pdf-o"></i> Exporter en PDF </button>
            <a href="#/dashboard.html" class="btn btn-default btn-sm">
                <i class="fa fa-align-right"></i> Dashboard
            </a>
            <a href="#/app-gestion-commercials" class="btn btn-default btn-sm">
                <i class="fa fa-align-right"></i> Gestion commerciale
            </a>
            <a href="javascript:history.go(+1)" class="btn btn-default btn-sm">
                <i class="fa fa-2x fa-arrow-right" aria-hidden="true"></i> 
            </a>
        </div>
    </div>
    <div id="formConfirmation">
        <div class="main-content" id="block_border">
            <div class="main-content-inner">
                <div class="portlet-body form" style="min-height: 680px !important;background: #fff;">
                    <!-- BEGIN FORM-->
                    <div class="col-md-12 portlets" id="contentToPrint" style="width: 100%; background: #fff;">
                        <h3 class="rotationBlock" style="color: #24445c; position: absolute !important;" ng-controller="ErpCtrl"><strong>COMMANDE: {{ref3}}- {{count}}</strong>
                        </h3>
                        <div class="panel-header panel-controls"> 
                            <h3 class="text-center DateDevis" style="color: #24445c;"><strong my-current-time="formatCreated"></strong></h3>
                            <div class="col-xs-5 PrintBlock">
                                <div  class="image" style="margin-left: 53px;">
                                    <img src='assets/pages/img/logo.png' class="pull-left img-responsive logo-amyevolut" style="max-width:150px;margin-left: 15px;" />
                                </div>
                                <div class="clearfix"></div>
                                <div style="margin-top: -15px !important;" class=" text-center">
                                    <h3 style="color:#26619c;font-size: 15px;"> 
                                        <strong> {{config.Configuration.raison_social}} </strong>
                                    </h3>  
                                    <address class="text-center" style="font-size: 12px;">
                                        <!--<strong style="color:#26619C;"> {{config.Configuration.raison_social}} </strong><br>-->
                                        <strong style="color:#26619C;"> {{config.Configuration.telephone_1}} </strong><br>
                                        <strong style="color:#26619C;"> {{config.Configuration.telephone_2}} </strong><br>
                                        <strong style="color:#26619C;"> {{config.Configuration.telephone_3}} </strong><br>
                                        <strong style="color:#26619C;"> {{config.Configuration.email}} </strong><br> 
                                    </address>
                                </div>
                            </div>
                            <div class="col-xs-3 col-md-4"></div>
                            <div class="col-xs-5 col-md-4 PrintBlock raisonSocial pull-right" style="font-size: 11px;margin-top: 80px;"> 
                                <address  class="PrintBlock" style="padding-left: 55px; color:#26619c;">
                                    <span style="line-height: 10px;"></span><strong>Fournisseur: </strong><br>
                                    <span style="line-height: 10px;">Raison Sociale: </span><strong>{{commande.Fournisseur.name}}</strong><br>
                                    <span style="line-height: 10px;">Adresse: </span><strong>{{commande.Fournisseur.adresse}}</strong><br>
                                    <span style="line-height: 10px;">Email: </span> <strong>{{commande.Fournisseur.email}}</strong><br>
                                    <span style="line-height: 10px;">Contact: +(216) </span> <strong>{{commande.Fournisseur.phone}}</strong>
                                </address>
                            </div>
                        </div>
                        <div class="clearfix"></div>
                        <div class="panel-content">
                            <table class="table table-bordered table-hover tableToPrint" id="myTable">
                                <thead style="height: 60px !important;">
                                    <tr style="background: #F2F2F2">
                                        <th>Ref</th>
                                        <th>Désignation</th>
                                        <th>Qte</th>
                                        <th>Unité</th>
                                        <th>R.%</th>
                                        <th style="width: 63px;">Prix U.HT</th>
                                        <th style="width: 68px;">TOTAL HT</th>
                                        <th style="width: 37px !important;">TVA</th>
                                    </tr>
                                </thead>
                                <tbody id="listItem">
                                    <tr ng-repeat="item in commande.Bon">
                                        <td style="width: 110px;">{{item.Product.ref}}</td>
                                        <td>{{item.Product.name}}</td>
                                        <td>{{item.qte_recue}}</td>
                                        <td>{{item.Product.Unite.name}}</td>
                                        <td>{{item.remise}}%</td>
                                        <td>{{item.last_unit_price * (1 - item.remise / 100) | number:3}}</td>
                                        <td>{{item.last_unit_price * item.qte_recue * (1 - item.remise / 100) | number:3}}</td>
                                        <td style="width: 37px !important;">{{item.Product.Tva.name}}</td>  
                                    </tr>
                                    <tr>
                                        <td class='devisNone' style="border-left: 1px solid #fff !important;border-top: 1px solid #fff !important;border-bottom:  1px solid #fff !important;"  colspan='4'></td>
                                        <td class='text-right' colspan='2'><strong>Total HT</strong></td>
                                        <td colspan='2'> {{total_ht * (1 + commande.Commande.remise_globale / 100) + remiseProduit | number
                                            :3}}</td>
                                    </tr>
                                    <tr>
                                        <td class='devisNone' style="border-left: 1px solid #fff !important;border-top: 1px solid #fff !important;border-bottom:  1px solid #fff !important;"  colspan='4'></td>
                                        <td class='text-right' colspan='2'><strong>Remise G.</strong></td>
                                        <td colspan='2'> {{(total_ht * commande.Commande.remise_globale / 100) + remiseProduit| number:3}}</td>
                                    </tr>
                                    <tr>
                                        <td class='devisNone' style="border-left: 1px solid #fff !important;border-top: 1px solid #fff !important;border-bottom:  1px solid #fff !important;"  colspan='4'></td>
                                        <td class='text-right' colspan='2'><strong>Total NET HT</strong></td>
                                        <td colspan='2'> {{total_ht| number:3}}</td>
                                    </tr>
                                    <tr>
                                        <td class='factureNone' style="border-left: 1px solid #fff !important;border-top: 1px solid #fff !important;border-bottom:  1px solid #fff !important;"  colspan='4'></td>
                                        <td class='text-right' colspan='2'><strong>Total Tva</strong></td>
                                        <td colspan='2'>{{total_tva| number:3}}</td>
                                    </tr>
                                    <tr>
                                        <td class='devisNone' style="border-left: 1px solid #fff !important;border-top: 1px solid #fff !important;border-bottom:  1px solid #fff !important;"  colspan='4'></td>
                                        <td class='text-right' colspan='2'><strong>Timbre Fiscal</strong></td>
                                        <td colspan='2'>{{commande.Commande.last_timbre_price| number:3}}</td> 
                                    </tr>
                                    <tr>
                                        <td class='devisNone' style="border-left: 1px solid #fff !important;border-top: 1px solid #fff !important;border-bottom:  1px solid #fff !important;"  colspan='4'></td>
                                        <td class='text-right' colspan='2'><strong>NET À PAYER</strong></td>
                                        <td colspan='2'>{{total_tva + total_ht - (-commande.Commande.last_timbre_price) | number
                                            :3}}</td>
                                    </tr>
                                </tbody>
                            </table>
                            <div class="col-xs-7 col-sm-7 col-md-4" style="padding: 0; margin-top: -190px !important;">
                                <table class="table table-bordered table-hover">
                                    <thead>
                                        <tr>
                                            <th>Base HT</th>
                                            <th>Taux TVA</th>
                                            <th>Montant TVA</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr ng-repeat="tva in taux">
                                            <td>{{tva.price_ht}}</td>
                                            <td>{{tva.taux}}</td>
                                            <td>{{tva.mantant}}</td>
                                        </tr>
                                        <tr>
                                            <td colspan="2">
                                                <strong  class="text-left">Total</strong>
                                            <td>{{total_tva| number:3}}</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        <p class="text-center SommeText" style="">Arrêté la présente commande à la somme de {{totalFinalText}} TTC </p>
                        <div class="clearfix"></div>
                    </div>
                    <div class="clearfix"></div>
                    <div id="InformationEntreprise" class="no-print"> 
                        <address class="text-center center-block" style="font-size: 10px; margin-left: 100px; position: relative; left: -5px !important;" >
                            {{config.Configuration.name}}<br>
                            RC: {{config.Configuration.rc}} M.F: {{config.Configuration.matricule_fiscale}}<br>
                            Siége Social: {{config.Configuration.siege}}  Agence: {{config.Configuration.agence}}<br>
                            {{config.Configuration.email}}  Tel: +(216) {{config.Configuration.telephone_2}}  +(33) {{config.Configuration.telephone_3}}<br>
                        </address>
                    </div>
                    <!-- END FORM-->
                </div>
                                                </div>
        </div>
    </div>
</div>
<script>
                                                var userAgent = navigator.userAgent;
                                if (userAgent.indexOf("Chrome") > - 1) {
                                        //Add Print for Chrome                               
                                                $("head").append("  <link href='" + base_url() + "assets/pages/css/print_chrome_1.css' rel='stylesheet' type='text/css' />");
                                        var intervalCommandeAchat = setInterval(function () {
                                                if (document.readyState === 'complete') {
                                                clearInterval(intervalCommandeAchat);
                                                console.log(document.getElementById("myTable").rows.length);
                                                var countID = count - 7;
                                                    if (count > 19 && count < 24) {
                                            countID = count - 7; $("#listItem tr:eq(" + countID + ")").addClass('break');
                                                    $("#listItem tr:eq(" + countID + ")").after('<tr colspan="10" style="height:30px !important; bord er: none !important;"></tr>');
                                                    $("#listItem tr:eq(" + countID + ")").after('<div style="page-break-after:always;page-break-before:avoid !important;"></div><div><!-- pagebreak --></div>');
                                        }
                                        if (count > 23 && count < 26) {
                                        $("#listItem tr:eq(" + countID + ")").addClass('break');
                                        $("#listItem tr:eq(" + countID + ")").after('<tr colspan="10" style="height:30px !important; border: none !important;"></tr>');
                                        $("#listItem tr:eq(" + countID + ")").after('<div style="page-break-after:always;page-break-before:avoid !important;"></div><div><!-- pagebreak --></div>');
                                    }
                                    if (count > 25) {
                                    $("#listItem tr:eq(17)").addClass('break');
                                    $("#listItem tr:eq(17)").after('<tr colspan="10" style="height:30px !important; border: none !important;"></tr>');
                                    $("#listItem tr:eq(17)").after('<div style="page-break-after:always;page-break-before:avoid !important;"></div><div><!-- pagebreak --></div>');

}
//                }, 3000);
}
}, 100);
}
if (userAgent.indexOf("Firefox") > -1) {
//Add Print for Firefox
$("head").append(" <link href='" + base_url() + "assets/pages/css/print_firefox.css' rel='stylesheet' type='text/css' />");

}
if (userAgent.indexOf("Firefox") === -1 && userAgent.indexOf("Chrome") === -1) {
//Add Print for Any Browser
$("head").append(" <link href='" + base_url() + "assets/pages/css/print_other.css' rel='stylesheet' type='text/css' />");
}
</script>