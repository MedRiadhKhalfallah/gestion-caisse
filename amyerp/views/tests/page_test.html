<style>
    table tr th{
        font-size: 12px !important;
    }
    table tr td{
        font-weight: 600;
        font-size: 11.5px !important;
    }
    .input-group .select2-container--bootstrap{
        width: 100% !important;
    }
    @media (min-width: 768px){
        .modal-dialog{width: 80% !important;}
    }
    table.ui-datepicker-calendar thead tr:first-child {
        background: #0097A7;
        color: #fff;
        border: 1px solid #080a0a !important;
    }
</style>
<div class="row">
    <div class="col-md-12 col-sm-12">
        <!-- BEGIN EXAMPLE TABLE PORTLET-->
        <div class="portlet box red">
            <div class="portlet-title">
                <div style="width: 50px;float: left !important;" class="actions">
                    <a href="javascript:history.go(-1)" class="btn btn-default btn-sm">
                        <i class="fa fa-2x fa-arrow-left" aria-hidden="true"></i> 
                    </a>
                </div>
                <div class="caption">
                    <i class="fa fa-cogs"></i>Liste Commandes </div>
                <div class="actions">
                    <a href="#/dashboard.html" class="btn btn-default btn-sm">
                        <i class="fa fa-align-right"></i> Dashboard
                    </a>
                    <a href="#/gestion-livreurs" class="btn btn-default btn-sm">
                        <i class="fa fa-list"></i> Liste livreurs
                    </a>
                    <a href="#/ajout-commande-client" class="btn btn-default btn-sm">
                        <i class="fa fa-plus"></i> Créer 
                    </a>
                    <a href="javascript:history.go(+1)" class="btn btn-default btn-sm">
                        <i class="fa fa-2x fa-arrow-right" aria-hidden="true"></i> 
                    </a>
                </div>
            </div>
            <div class="portlet-body">            
                <div class="tab_left">
                    <ul  class="nav nav-tabs nav-red">
                        <!--<li class="active"><a href="#" data-target="#tab3_1" data-toggle="tab" ng-click="update_en_attente_ramassage()">En attente ramassage ou dépôt </a></li>-->
                        <li class="active"><a href="#" data-target="#tab3_1" data-toggle="tab" ng-click="update_client_ramassage_depot()">En attente ramassage ou dépôt </a></li>
                        <!--<li><a href="#" data-target="#tab3_2" data-toggle="tab">Commandes dépot en attente</a></li>-->
                        <li><a href="#" data-target="#tab3_2" data-toggle="tab" ng-click="update_en_recuperee()">Récupérées</a></li>
                        <li><a href="#" data-target="#tab3_3" data-toggle="tab" ng-click="update_en_stock()" id="noFocus">En stock</a></li>
                        <li><a href="#" data-target="#tab3_4" data-toggle="tab" ng-click="update_en_attente_livraison()">En cours de livraison</a></li>
                        <li><a href="#" data-target="#tab3_5" data-toggle="tab" ng-click="update_livraison()">Livrées</a></li>
                        <li><a href="#" data-target="#tab3_6" data-toggle="tab" ng-click="update_retour()">Les retours</a></li>
                        <li><a href="#" data-target="#tab3_7" data-toggle="tab" ng-click="update_annulation()">Les annulations</a></li>
                    </ul>
                    <div class="tab-content">
                        <div class="tab-pane fade active in" id="tab3_1">
                            <div class="col-md-12">
                                <div class="page-header">
                                    <h3 class="col-md-5"><span class="glyphicon glyphicon-user"></span> Liste expéditeurs : </h3>
                                    <div class="clearfix"></div>
                                </div> 
                                <div class="panel-content">
                                    <div class="clearfix"></div>
                                    <form class="form-inline" style="float: right">
                                        <div class="form-group">
                                            <label >Recherche</label>
                                            <input type="text" ng-model="searchRamassage" ng-change="searchResult(searchRamassage)" class="form-control" placeholder="Recherche..." ng-trim="false">
                                        </div>
                                    </form>
                                    <div class="clearfix"></div><br>
                                    <div class="pull-right">
                                        <button id="previousPage" ng-click="previousPage()" class="btn btn-default">Précédent</button>
                                        <button id="firstPage" ng-click="firstPage()" class="btn btn-default">1</button>
                                        <button class="btn btn-default active" disabled="disabled" id="currentPage"><strong>{{currentPage}}</strong></button>
                                        <div id="otherPages" style="clear: none;display: initial;"></div><button class="btn btn-default" id="nextPage" ng-click="nextPage()">Suivant</button>
                                    </div>
                                    <div class="clearfix"></div>
                                    <button class="pull-left btn btn-info" ng-click="showAdvancedSearch()">Recherche Avancée <i class="fa fa-search"></i></button>
                                    <div class="clearfix"></div>
                                    <br>
                                    <br>
                                    <div class="col-md-12">
                                        <table class="table table-striped table-bordered table-hover table-checkable order-column">
                                            <thead>
                                                <tr>
                                                    <th> Nom client </th>
                                                    <th> Email </th>
                                                    <!--<th> Code barre </th>-->
                                                    <th> Téléphone </th>
                                                    <th> Adresse </th>
                                                    <th> Ville </th>
                                                    <th> Frais de livraison </th>
                                                    <th> Frais d'annulation </th>
                                                    <th> Actions </th>
                                                    <!--<th> Affectation </th>-->
                                                    <!--<th> </th>-->
                                                </tr>
                                                <tr id="filterSearch">
                                                    <th colspan="4"></th>
                                                    <th colspan="4"> 
                                                        <select id="listVille" ng-model="ville" ng-change="filterByVille(ville)">
                                                            <option value="">Tous</option>
                                                            <option ng-repeat="($index,ville) in villes" value="{{ville.Ville.id}}">{{ville.Ville.name}}</option>
                                                        </select> 
                                                    </th>
                                                </tr>
                                            </thead>
                                            <tbody style="text-align: left;">
                                                <tr ng-if="clientsramassage.length > 0" class="odd gradeX" ng-repeat="($index, client) in clientsramassage" id="CommandeRows" data-data-id="{{commande.Commande.id}}">
                                                    <td style="width: 160px;">{{client.User.full_name}}</td>
                                                    <td>{{client.User.email}}</td>
                                                    <!--<td></td>-->
                                                    <td>{{client.User.phone}}</td> 
                                                    <td>{{client.User.adress}}</td> 
                                                    <td>{{client.Ville.name}}</td> 
                                                    <td>{{client.User.frais_livraison}}</td> 
                                                    <td>{{client.User.frais_annulation}}</td> 
                                                    <!--<td>{{commande.Receiver.full_name}}</td>-->
                                                    <td>  
                                                        <ul class="nav nav-pills">
                                                            <li>
                                                                <div>
                                                                    <a href="#/view-commande-for-client/{{client.User.id}}"  class="btn btn-info btn-sm">
                                                                        <i class="fa fa-eye"></i>
                                                                    </a>
                                                                </div>                                        
                                                            </li>
                                                        </ul> 
                                                    </td>
                                                </tr>
                                                <tr ng-if="clientsramassage.length === 0">
                                                    <td colspan="8" class="text-center">Pas de commandes</td>
                                                </tr>
                                            </tbody> 
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="tab-pane fade" id="tab3_2">
                            <div class="page-header">
                                <h3 class="col-md-5"> Commandes récupérées:</h3>
                                <!--                                <div class="col-md-7">
                                                                    <div class="form-group col-md-12" style="padding-left: 0; padding-right: 0;">
                                                                        <label class="control-label col-md-4" style="text-align: left;font-size: 15px;font-weight: 700;">valider commande</label>
                                                                        <div class="col-md-7">
                                                                            <div class="input-group input-medium" style="width: 100% !important;">
                                                                                <span class="input-group-btn">
                                                                                    <button class="btn default" type="button">
                                                                                        <i class="fa fa-list"></i>
                                                                                    </button>
                                                                                </span>
                                                                                <input type="text" id="CodeBarre" class="form-control" placeholder="valider commande par code barre" style="width: 100%;" ng-keypress="myFunct($event)">
                                                                            </div>
                                                                             /input-group 
                                                                        </div>
                                                                    </div>
                                                                </div>-->
                                <div class="clearfix"></div>
                            </div>
                            <div class="panel-content">
                                <div  ng-if="commandesencoursespaceclient.length === 0">
                                    <p>pas de commandes récupérées.</p>
                                </div>
                                <div ng-if="commandesencoursespaceclient.length > 0" class="col-md-12">
                                    <div class="clearfix"></div>
                                    <form class="form-inline" style="float: right">
                                        <div class="form-group">
                                            <label >Recherche</label>
                                            <input type="text" ng-model="search" class="form-control" placeholder="Recherche...">
                                        </div>
                                    </form>
                                    <div class="clearfix"></div>
                                    <table class="table table-striped table-bordered table-hover table-checkable order-column">
                                        <thead>
                                            <tr>
                                                <th> Date de Génération </th>
                                                <th> Référence Commande </th>
                                                <!--<th> Code barre </th>-->
                                                <th> Récupérateur </th>
                                                <th> Expéditeur </th>
                                                <th> Destinataire </th>
                                                <th> Adresse de destinataire</th>
                                                <th> Ville </th>
                                                <th> Actions </th>
                                                <th> </th>
                                            </tr>
                                        </thead>
                                        <tbody style="text-align: left;">
                                            <tr class="odd gradeX" dir-paginate="($index, commande) in commandesencoursespaceclient | filter:search |itemsPerPage:10" id="CommandeRows" data-data-id="{{commande.Commande.id}}">
                                                <td style="width: 160px;" ng-if="commande.Commande.type_remettre == 'Ramassage'">{{commande.Commande.modified}}</td>
                                                <td  ng-if="commande.Commande.type_remettre == 'Ramassage'">{{commande.Commande.ref}}</td>
                                                <!--<td></td>-->
                                                <td  ng-if="commande.Commande.type_remettre == 'Ramassage'">
                                                    <div>
                                                        <a href="#/fiche-livreur/{{commande.Getby.id}}" class="btn btn-info btn-sm">{{commande.Getby.first_name}} {{commande.Getby.last_name}}</a>
                                                    </div>  
                                                </td>
                                                <td  ng-if="commande.Commande.type_remettre == 'Ramassage'">{{commande.User.full_name}}</td> 
                                                <td  ng-if="commande.Commande.type_remettre == 'Ramassage'">{{commande.Receiver.full_name}}</td>
                                                <td  ng-if="commande.Commande.type_remettre == 'Ramassage'">{{commande.Receiver.adresse}}</td> 
                                                <td  ng-if="commande.Commande.type_remettre == 'Ramassage'">{{commande.Receiver.Ville.name}}</td> 
                                                <td ng-if="commande.Commande.type_remettre == 'Ramassage'">
                                                    <ul class="nav nav-pills">
                                                        <li>
                                                            <div>
                                                                <a href="#/view-commande-client/{{commande.Commande.id}}"  class="btn btn-info btn-sm">
                                                                    <i class="fa fa-eye"></i>
                                                                </a>
                                                            </div>                                        
                                                        </li>
                                                    </ul>
                                                </td>
                                            </tr>
                                        </tbody> 
                                        <!--                                        <tfoot>
                                                                                    <tr>
                                                                                        <td colspan="9">
                                                                                            <div ng-controller="ContactController">
                                                                                                <button ng-click="affecterGroupeCommande()" class="btn btn-info btn-sm pull-right">affecter</button>
                                                                                            </div>
                                                                                        </td>
                                                                                    </tr>
                                                                                </tfoot>-->
                                    </table>
                                    <dir-pagination-controls
                                        max-size="5"
                                        direction-links="true"
                                        boundary-links="true"  style="float: right;top: -28px;position: relative;" class="portlet-body">
                                    </dir-pagination-controls>
                                    <!--                                        <div>
                                                                                <button ng-click="affecterGroupeCommande()" class="btn btn-info btn-sm">affecter</button>
                                                                            </div>  -->
                                </div>
                            </div>
                        </div>
                        <div class="tab-pane fade" id="tab3_3">
                            <div class="page-header">
                                <h3 class="col-md-4"> Commandes en stock:</h3>
                                <div class="col-md-7">
                                    <div style="position: relative;float: right;top: -20px;">
                                        <a href="#/gestion-bon-chargement" class="btn btn-success btn-sm">Bon de chargement de livraison</a>
                                    </div>
                                    <div class="form-group col-md-12" style="padding-left: 0; padding-right: 0;">
                                        <label class="control-label col-md-4" style="text-align: left;font-size: 15px;font-weight: 700;">Affecter commande</label>
                                        <div class="col-md-7">
                                            <div class="input-group input-medium" style="width: 100% !important;">
                                                <span class="input-group-btn">
                                                    <button class="btn default" type="button">
                                                        <i class="fa fa-user"></i>
                                                    </button>
                                                </span>
                                                <input type="text" id="CodeBarreAffect" class="form-control" placeholder="Code barre" style="width: 100%;" ng-keypress="myAffect($event)">
                                            </div>
                                            <!-- /input-group --> 
                                        </div>
                                    </div>
                                    <div class="col-md-12" style="padding-left: 0;">
                                        <div class="form-group col-md-12" style="padding-left: 0; padding-right: 0;">
                                            <label class="control-label col-md-4" style="text-align: left;font-size: 15px;font-weight: 700;">Entrer en stock</label>
                                            <div class="col-md-7" style="padding-right: 0;">
                                                <div class="input-group input-medium" style="width: 100% !important;">
                                                    <span class="input-group-btn">
                                                        <button class="btn default" type="button">
                                                            <i class="fa fa-list"></i>
                                                        </button>
                                                    </span>
                                                    <input type="text" id="CodeBarre" class="form-control" placeholder="Code barre" style="width: 100%;" ng-keypress="myFunct($event)">
                                                </div>
                                                <!-- /input-group -->
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="clearfix"></div>
                            </div>
                            <div class="panel-content">
                                <div  ng-if="commandesenstock.length === 0">
                                    <p>pas de commandes en stock.</p>
                                </div>
                                <div ng-if="commandesenstock.length > 0" class="col-md-12">
                                    <div class="clearfix"></div>
                                    <form class="form-inline" style="float: right">
                                        <div class="form-group">
                                            <label >Recherche</label>
                                            <input type="text" ng-model="search" class="form-control" placeholder="Recherche...">
                                        </div>
                                    </form>
                                    <div class="clearfix"></div>
                                    <table class="table table-striped table-bordered table-hover table-checkable order-column">
                                        <thead>
                                            <tr>
                                                <th> Date de Génération </th>
                                                <th> Référence </th>
                                                <th> Statut </th>
                                                <th> Cause Statut </th>
                                                <th> Source </th>
                                                <th> Récupérateur </th>
                                                <th> Expéditeur </th>
                                                <th> Destinataire </th>
                                                <th> Adresse de destinataire</th>
                                                <th> Ville </th>
                                                <th> Actions </th>
                                                <th> Affectation </th>
                                                <th> </th>
                                            </tr>
                                        </thead>
                                        <tbody style="text-align: left;" id="CommaneInStock">
                                            <tr class="odd gradeX" dir-paginate="($index, commande) in commandesenstock | filter:search |itemsPerPage:10" id="CommandeEnterStock" data-data-id="{{commande.Commande.id}}">
                                                <td style="width: 160px;">{{commande.Commande.modified}}</td>
                                                <td>{{commande.Commande.ref}}</td>
                                                <td ng-if="commande.Commande.state == 'Annulée'"><label class="label label-danger label-sm">Annulation ({{commande.Commande.countRetour}})</label></td>
                                                <td ng-if="commande.Commande.state == 'Retour'"><label class="label label-info label-sm">Retour ({{commande.Commande.countRetour}})</label></td>
                                                <td ng-if="commande.Commande.state == 'En stock'"><label class="label label-success label-sm">En attente livraison</label></td>
                                                <td ng-if="commande.Commande.state == 'En Cours'"><label class="label label-success label-sm">En attente livraison</label></td>
                                                <!--<td ng-if="commande.Commande.state === 'Retour'"><label class="btn btn-sm btn-info">{{commande.Commande.cause_nonlivraison}} ({{commande.Commande.countRetour}})</label></td>-->
                                                <td ng-if="commande.Commande.state === 'Retour'">{{commande.Commande.cause_nonlivraison}}</td>
                                                <!--<td ng-if="commande.Commande.state === 'Annulée'"><label class="btn btn-sm btn-danger">{{commande.Commande.cause_nonlivraison}} ({{commande.Commande.countRetour}})</label></td>-->
                                                <td ng-if="commande.Commande.state === 'Annulée'">{{commande.Commande.cause_nonlivraison}}</td>
                                                <td ng-if="commande.Commande.state === 'En stock'"></td>
                                                <td>{{commande.Commande.source}}</td>
                                                <!--<td></td>-->
                                                <td ng-if="commande.Commande.source == 'espace client'">
                                                    <div>
                                                        <a href="#/fiche-commerciale/{{commande.Getby.id}}" class="btn btn-info btn-sm">{{commande.Getby.first_name}} {{commande.Getby.last_name}}</a>
                                                    </div>  
                                                </td>
                                                <td ng-if="commande.Commande.source != 'espace client'">
                                                    Déposée
                                                </td>
                                                <!--                                                <td ng-if="commande.Commande.type_remettre == 'Ramassage'">Ramassage</td> 
                                                                                                <td ng-if="commande.Commande.type_remettre == 'Depot'">Dépôt</td> -->
                                                <td>{{commande.User.full_name}}</td> 
                                                <td>{{commande.Receiver.full_name}}</td>
                                                <td>{{commande.Receiver.adresse}}</td> 
                                                <td>{{commande.Receiver.Ville.name}}</td> 
                                                <td>
                                                    <ul class="nav nav-pills">
                                                        <li>
                                                            <div>
                                                                <a href="#/view-commande-client/{{commande.Commande.id}}"  class="btn btn-info btn-sm">
                                                                    <i class="fa fa-eye"></i>
                                                                </a>
                                                            </div>                                        
                                                        </li>
                                                    </ul>
                                                </td>
                                                <td style="width: 120px;">  
                                                    <ul class="nav nav-pills" ng-if="commande.Commande.state != 'Annulée'">
                                                        <li>
                                                            <div>
                                                                <a href="#/affecter-commande-livreur/{{commande.Commande.id}}" class="btn btn-success btn-sm">Affecter livreur</a>
                                                            </div>                                        
                                                        </li><!--
                                                        <li ng-if="commande.Commande.isLivraison == 1">
                                                            <div>
                                                                <a href="#/fiche-commerciale/{{commande.Commercial.id}}" class="btn btn-info btn-sm">{{commande.Commercial.first_name}} {{commande.Commercial.last_name}}</a>
                                                            </div>                                        
                                                        </li>-->
                                                        <!--                                                        <li>
                                                                                                                    <div ng-controller="ModalCommandeCtrl">
                                                                                                                        <button id="commandeSumbit" data-index="{{$index}}" data-commande="{{commande.Commande.id}}"  ng-click="open(commande.Commande.id, $index, commande.User.full_name)" data-name="{{commande.Commande.ref}}" data-cmd="{{commande.Commande.id}}" class="btn btn-danger btn-embossed btn-sm">
                                                                                                                            <i class="fa fa-times"></i>
                                                                                                                        </button>
                                                                                                                    </div>                                                                            
                                                                                                                </li>-->
                                                    </ul> 
                                                </td>
                                                <td>
                                                    <form name="myForm" ng-if="commande.Commande.state != 'Annulée'">
                                                        <input  type="checkbox" id="CheckedBox" value="{{checkboxModel.value}}" ng-model="checkboxModel.value">
                                                    </form> 
                                                </td>
                                            </tr>
                                        </tbody> 
                                        <tfoot>
                                            <tr>
                                                <td colspan="13">
                                                    <div ng-controller="ContactController">
                                                        <button ng-click="affecterGroupeCommande(1)" class="btn btn-info btn-sm pull-right">affecter</button>
                                                    </div>
                                                </td>
                                            </tr>
                                        </tfoot>
                                    </table>
                                    <dir-pagination-controls
                                        max-size="5"
                                        direction-links="true"
                                        boundary-links="true"  style="float: right;top: -28px;position: relative;" class="portlet-body">
                                    </dir-pagination-controls>
                                    <!--                                        <div>
                                                                                <button ng-click="affecterGroupeCommande()" class="btn btn-info btn-sm">affecter</button>
                                                                            </div>  -->
                                </div>
                            </div>
                        </div>                     
                        <div class="tab-pane fade" id="tab3_4">
                            <div class="page-header">
                                <h3> Commandes en cours de livraison:</h3>
                            </div>

                            <div class="panel-content">
                                <div  ng-if="commandeseEnattentelivraisonspaceclient.length === 0">
                                    <p>pas de commandes en cours de livraison.</p>
                                </div>
                                <div ng-if="commandeseEnattentelivraisonspaceclient.length > 0" class="col-md-12">
                                    <div class="clearfix"></div>
                                    <form class="form-inline" style="float: right">
                                        <div class="form-group">
                                            <label >Recherche</label>
                                            <input type="text" ng-model="search" class="form-control" placeholder="Recherche...">
                                        </div>
                                    </form>
                                    <div class="clearfix"></div>
                                    <table class="table table-striped table-bordered table-hover table-checkable order-column">
                                        <thead>
                                            <tr>
                                                <th> Date de Génération </th>
                                                <th> Référence Commande </th>
                                                <th> Date de livraison </th>
                                                <th> Livreur </th>
                                                <th> Expéditeur </th>
                                                <th> Destinataire </th>
                                                <th> Adresse destinataire </th>
                                                <th> Ville </th>
                                                <th> Actions </th>
                                                <th> Réaffecter </th>
                                                <th> </th>
                                            </tr>
                                        </thead>
                                        <tbody style="text-align: left;" id="enCoursLivraison">
                                            <tr class="odd gradeX" dir-paginate="($index, commande) in commandeseEnattentelivraisonspaceclient | filter:search |itemsPerPage:10" id="CommandeRows" data-data-id="{{commande.Commande.id}}">
                                                <td style="width: 160px;">{{commande.Commande.modified}}</td>
                                                <td>{{commande.Commande.ref}}</td>
                                                <td>{{commande.Commande.date_livraison| date:'dd-MM-yyyy'}}</td>
                                                <td>
                                                    <div>
                                                        <a href="#/fiche-livreur/{{commande.Livreur.id}}" class="btn btn-info btn-sm">{{commande.Livreur.full_name}}</a>
                                                    </div>  
                                                </td>
                                                <!--                                                <td ng-if="commande.Commande.type_remettre == 'Ramassage'">Ramassage</td> 
                                                                                                <td ng-if="commande.Commande.type_remettre == 'Depot'">Dépôt</td> -->
                                                <td>{{commande.User.full_name}}</td> 
                                                <td>{{commande.Receiver.full_name}}</td> 
                                                <td>{{commande.Receiver.adresse}}</td> 
                                                <td>{{commande.Receiver.Ville.name}}</td>  
                                                <td>
                                                    <ul class="nav nav-pills">
                                                        <li>
                                                            <div>
                                                                <a href="#/view-commande-client/{{commande.Commande.id}}"  class="btn btn-info btn-sm">
                                                                    <i class="fa fa-eye"></i>
                                                                </a>
                                                            </div>                                         
                                                        </li>
                                                    </ul>
                                                </td>
                                                <td style="width: 120px;">  
                                                    <ul class="nav nav-pills">
                                                        <li>
                                                            <div>
                                                                <a href="#/affecter-commande-livreur/{{commande.Commande.id}}" class="btn btn-success btn-sm">Réaffecter livreur</a>
                                                            </div>                                        
                                                        </li><!--
                                                        <li ng-if="commande.Commande.isLivraison == 1">
                                                            <div>
                                                                <a href="#/fiche-commerciale/{{commande.Commercial.id}}" class="btn btn-info btn-sm">{{commande.Commercial.first_name}} {{commande.Commercial.last_name}}</a>
                                                            </div>                                        
                                                        </li>-->
                                                        <!--                                                        <li>
                                                                                                                    <div ng-controller="ModalCommandeCtrl">
                                                                                                                        <button id="commandeSumbit" data-index="{{$index}}" data-commande="{{commande.Commande.id}}"  ng-click="open(commande.Commande.id, $index, commande.User.full_name)" data-name="{{commande.Commande.ref}}" data-cmd="{{commande.Commande.id}}" class="btn btn-danger btn-embossed btn-sm">
                                                                                                                            <i class="fa fa-times"></i>
                                                                                                                        </button>
                                                                                                                    </div>                                                                            
                                                                                                                </li>-->
                                                    </ul> 
                                                </td>
                                                <td>
                                                    <form name="myForm">
                                                        <input  type="checkbox" id="CheckedBox" value="{{checkboxModel.value}}" ng-model="checkboxModel.value">
                                                    </form> 
                                                </td>
                                            </tr>
                                        </tbody> 
                                        <tfoot>
                                            <tr>
                                                <td colspan="11">
                                                    <div ng-controller="ContactController">
                                                        <button ng-click="affecterGroupeCommande(3)" class="btn btn-info btn-sm pull-right">affecter</button>
                                                    </div>
                                                </td>
                                            </tr>
                                        </tfoot>
                                    </table>
                                    <dir-pagination-controls
                                        max-size="5"
                                        direction-links="true"
                                        boundary-links="true"  style="float: right;top: -28px;position: relative;" class="portlet-body">
                                    </dir-pagination-controls>
                                    <!--                                        <div>
                                                                                <button ng-click="affecterGroupeCommande()" class="btn btn-info btn-sm">affecter</button>
                                                                            </div>  -->
                                </div>
                            </div>
                        </div>                        
                        <div class="tab-pane fade" id="tab3_5">
                            <div class="page-header">
                                <h3> Commandes livrées:</h3>
                            </div>
                            <div class="panel-content">
                                <div  ng-if="commandeslivrees.length === 0">
                                    <p>pas de commandes livrées.</p>
                                </div>
                                <div ng-if="commandeslivrees.length > 0" class="col-md-12">
                                    <div class="clearfix"></div>
                                    <form class="form-inline" style="float: right">
                                        <div class="form-group">
                                            <label >Recherche</label>
                                            <input type="text" ng-model="search" class="form-control" placeholder="Recherche...">
                                        </div>
                                    </form>
                                    <div class="clearfix"></div>
                                    <table class="table table-striped table-bordered table-hover table-checkable order-column">
                                        <thead>
                                            <tr>
                                                <th> Date de Génération </th>
                                                <th> Référence Commande </th>
                                                <th> Date de livraison </th>
                                                <th> Livreur </th>
                                                <th> Expéditeur </th>
                                                <th> Destinataire </th>
                                                <th> Adresse destinataire </th>
                                                <th> Ville </th>
                                                <!--<th> Destinataire </th>-->
                                                <th> Actions </th>
                                                <!--<th> </th>-->
                                            </tr>
                                        </thead>
                                        <tbody style="text-align: left;">
                                            <tr class="odd gradeX" dir-paginate="($index, commande) in commandeslivrees | filter:search |itemsPerPage:10" id="CommandeRows" data-data-id="{{commande.Commande.id}}">
                                                <td style="width: 160px;">{{commande.Commande.modified}}</td>
                                                <td>{{commande.Commande.ref}}</td>
                                                <td>{{commande.Commande.date_livraison| date:'dd-MM-yyyy'}}</td>
                                                <td>
                                                    <div>
                                                        <a href="#/fiche-livreur/{{commande.Livreur.id}}" class="btn btn-info btn-sm">{{commande.Livreur.full_name}}</a>
                                                    </div>  
                                                </td>
                                                <!--                                                <td ng-if="commande.Commande.type_remettre == 'Ramassage'">Ramassage</td> 
                                                                                                <td ng-if="commande.Commande.type_remettre == 'Depot'">Dépôt</td> -->
                                                <td>{{commande.User.full_name}}</td> 
                                                <td>{{commande.Receiver.full_name}}</td> 
                                                <td>{{commande.Receiver.adresse}}</td> 
                                                <td>{{commande.Receiver.Ville.name}}</td> 
                                                <!--<td>{{commande.Receiver.full_name}}</td>-->
                                                <td>  
                                                    <ul class="nav nav-pills">
                                                        <ul class="nav nav-pills">
                                                            <li>
                                                                <div>
                                                                    <a href="#/view-commande-client/{{commande.Commande.id}}"  class="btn btn-info btn-sm">
                                                                        <i class="fa fa-eye"></i>
                                                                    </a>
                                                                </div>                                        
                                                            </li>
                                                        </ul>
                                                        <!--                                                        <li ng-if="commande.Commande.isLivraison == 0">
                                                                                                                    <div>
                                                                                                                        <a href="#/affecter-commande-livreur/{{commande.Commande.id}}" class="btn btn-success btn-sm">Affecter livreur</a>
                                                                                                                    </div>                                        
                                                                                                                </li>-->
                                                        <!--                                                        <li ng-if="commande.Commande.isLivraison == 1">
                                                                                                                    <div>
                                                                                                                        <a href="#/fiche-commerciale/{{commande.Commercial.id}}" class="btn btn-info btn-sm">{{commande.Commercial.first_name}} {{commande.Commercial.last_name}}</a>
                                                                                                                    </div>                                        
                                                                                                                </li>-->
                                                        <!--                                                        <li>
                                                                                                                    <div ng-controller="ModalCommandeCtrl">
                                                                                                                        <button id="commandeSumbit" data-index="{{$index}}" data-commande="{{commande.Commande.id}}"  ng-click="open(commande.Commande.id, $index, commande.User.full_name)" data-name="{{commande.Commande.ref}}" data-cmd="{{commande.Commande.id}}" class="btn btn-danger btn-embossed btn-sm">
                                                                                                                            <i class="fa fa-times"></i>
                                                                                                                        </button>
                                                                                                                    </div>                                                                            
                                                                                                                </li>-->
                                                    </ul> 
                                                </td>
                                            </tr>
                                        </tbody> 
                                    </table>
                                    <dir-pagination-controls
                                        max-size="5"
                                        direction-links="true"
                                        boundary-links="true"  style="float: right;top: -28px;position: relative;" class="portlet-body">
                                    </dir-pagination-controls>
                                    <!--                                        <div>
                                                                                <button ng-click="affecterGroupeCommande()" class="btn btn-info btn-sm">affecter</button>
                                                                            </div>  -->
                                </div>
                            </div>
                        </div>
                        <div class="tab-pane fade" id="tab3_6">
                            <div class="page-header">
                                <h3> Retour Commandes:</h3>
                            </div>
                            <div class="panel-content">
                                <div  ng-if="commandesretours.length === 0">
                                    <p>pas de retours commandes.</p>
                                </div>
                                <div ng-if="commandesretours.length > 0" class="col-md-12">
                                    <div class="clearfix"></div>
                                    <form class="form-inline" style="float: right">
                                        <div class="form-group">
                                            <label >Recherche</label>
                                            <input type="text" ng-model="search" class="form-control" placeholder="Recherche...">
                                        </div>
                                    </form>
                                    <div class="clearfix"></div>
                                    <table class="table table-striped table-bordered table-hover table-checkable order-column">
                                        <thead>
                                            <tr>
                                                <th> Date de Génération </th>
                                                <th> Référence Commande </th>
                                                <th> Date de livraison </th>
                                                <th> Livreur </th>
                                                <th> Expéditeur </th>
                                                <th> Destinataire </th>
                                                <th> Adresse destinataire </th>
                                                <th> Ville </th>
                                                <th> Cause retour </th>
                                                <th style="width: 200px;"> Actions </th>
                                                <th> Réaffecter </th>
                                                <th> </th>
                                            </tr>
                                        </thead>
                                        <tbody style="text-align: left;" id="commandeRetours">
                                            <tr class="odd gradeX" dir-paginate="($index, commande) in commandesretours | filter:search |itemsPerPage:10" id="CommandeRowsRetours" data-data-id="{{commande.Commande.id}}">
                                                <td style="width: 160px;">{{commande.Commande.modified}}</td>
                                                <td>{{commande.Commande.ref}}</td>
                                                <td>{{commande.Commande.date_livraison| date:'dd-MM-yyyy'}}</td>
                                                <td>
                                                    <div>
                                                        <a href="#/fiche-livreur/{{commande.Livreur.id}}" class="btn btn-info btn-sm">{{commande.Livreur.full_name}}</a>
                                                    </div>  
                                                </td>
                                                <!--                                                <td ng-if="commande.Commande.type_remettre == 'Ramassage'">Ramassage</td> 
                                                                                                <td ng-if="commande.Commande.type_remettre == 'Depot'">Dépôt</td> -->
                                                <td>{{commande.User.full_name}}</td> 
                                                <td>{{commande.Receiver.full_name}}</td> 
                                                <td>{{commande.Receiver.adresse}}</td> 
                                                <td>{{commande.Receiver.Ville.name}}</td> 
                                                <td>{{commande.Commande.cause_nonlivraison}}</td>
                                                <td style="width: 200px;">
                                                    <ul class="nav nav-pills">
                                                        <li>
                                                            <div>
                                                                <a href="#/view-commande-client/{{commande.Commande.id}}"  class="btn btn-info btn-sm">
                                                                    <i class="fa fa-eye"></i>
                                                                </a>
                                                            </div>                                        
                                                        </li>
                                                        <li>
                                                            <div>
                                                                <button ng-controller="ModalAnnuleCommandeCtrl" type="button" class="btn btn-warning btn-sm" style="background: #673ab7 !important; border:  #673ab7 !important;" ng-click="open(commande.Commande.id, commande.Commande.ref, commande.Commande.created, commande.User.full_name, commande.User.adress, commande.User.Ville.name, $index)">Annulée</button>
                                                            </div>                                        
                                                        </li>
                                                    </ul>
                                                </td>
                                                <td style="width: 230px;">  
                                                    <ul class="nav nav-pills">
                                                        <li>
                                                            <div>
                                                                <a href="#/affecter-commande-livreur/{{commande.Commande.id}}" class="btn btn-success btn-sm">Réaffecter livreur</a>
                                                            </div>                                        
                                                        </li>
                                                    </ul> 
                                                </td>
                                                <td>
                                                    <form name="myForm">
                                                        <input  type="checkbox" id="CheckedBox" value="{{checkboxModel.value}}" ng-model="checkboxModel.value">
                                                    </form> 
                                                </td>
                                            </tr>
                                        </tbody> 
                                        <tfoot>
                                            <tr>
                                                <td colspan="12">
                                                    <div ng-controller="ContactController">
                                                        <button ng-click="affecterGroupeCommande(4)" class="btn btn-info btn-sm pull-right">affecter</button>
                                                    </div>
                                                </td>
                                            </tr>
                                        </tfoot>
                                    </table>
                                    <dir-pagination-controls
                                        max-size="5"
                                        direction-links="true"
                                        boundary-links="true"  style="float: right;top: -28px;position: relative;" class="portlet-body">
                                    </dir-pagination-controls>
                                    <!--                                        <div>
                                                                                <button ng-click="affecterGroupeCommande()" class="btn btn-info btn-sm">affecter</button>
                                                                            </div>  -->
                                </div>
                            </div>
                        </div>
                        <div class="tab-pane fade" id="tab3_7">
                            <div class="page-header">
                                <h3> Commandes annulées:</h3>
                            </div>
                            <div class="panel-content">
                                <div  ng-if="commandesannulee.length === 0">
                                    <p>pas de commandes annulées.</p>
                                </div>
                                <div ng-if="commandesannulee.length > 0" class="col-md-12">
                                    <div class="clearfix"></div>
                                    <form class="form-inline" style="float: right">
                                        <div class="form-group">
                                            <label >Recherche</label>
                                            <input type="text" ng-model="search" class="form-control" placeholder="Recherche...">
                                        </div>
                                    </form>
                                    <div class="clearfix"></div>
                                    <table class="table table-striped table-bordered table-hover table-checkable order-column">
                                        <thead>
                                            <tr>
                                                <th> Date de Génération </th>
                                                <th> Référence Commande </th>
                                                <th> Date de livraison </th>
                                                <th> Livreur </th>
                                                <th> Expéditeur </th>
                                                <th> Destinataire </th>
                                                <th> Adresse destinataire </th>
                                                <th> Ville </th>
                                                <!--<th> Cause annulation </th>-->
                                                <th> Actions </th>
                                                <th> </th>
                                            </tr>
                                        </thead>
                                        <tbody style="text-align: left;">
                                            <tr class="odd gradeX" dir-paginate="($index, commande) in commandesannulee | filter:search |itemsPerPage:10" id="CommandeRows" data-data-id="{{commande.Commande.id}}">
                                                <td style="width: 160px;">{{commande.Commande.modified}}</td>
                                                <td>{{commande.Commande.ref}}</td>
                                                <td>{{commande.Commande.date_livraison| date:'dd-MM-yyyy'}}</td>
                                                <td>
                                                    <div>
                                                        <a href="#/fiche-livreur/{{commande.Livreur.id}}" class="btn btn-info btn-sm">{{commande.Livreur.full_name}}</a>
                                                    </div>  
                                                </td>
                                                <!--                                                <td ng-if="commande.Commande.type_remettre == 'Ramassage'">Ramassage</td> 
                                                                                                <td ng-if="commande.Commande.type_remettre == 'Depot'">Dépôt</td> -->
                                                <td>{{commande.User.full_name}}</td> 
                                                <td>{{commande.Receiver.full_name}}</td> 
                                                <td>{{commande.Receiver.adresse}}</td> 
                                                <td>{{commande.Receiver.Ville.name}}</td> 
                                                <td>
                                                    <ul class="nav nav-pills">
                                                        <li>
                                                            <div>
                                                                <a href="#/view-commande-client/{{commande.Commande.id}}"  class="btn btn-info btn-sm">
                                                                    <i class="fa fa-eye"></i>
                                                                </a>
                                                            </div>                                        
                                                        </li>
                                                    </ul>
                                                </td>
                                                <td>
                                                    <ul class="nav nav-pills">
                                                        <li>
                                                            <div>
                                                                <a href="#/affecter-commande-livreur/{{commande.Commande.id}}" class="btn btn-success btn-sm">Réaffecter livreur</a>
                                                            </div>                                        
                                                        </li>
                                                    </ul>
                                                </td>
                                            </tr>
                                        </tbody> 
                                        <!--                                        <tfoot>
                                                                                    <tr>
                                                                                        <td colspan="10">
                                                                                            <div ng-controller="ContactController">
                                                                                                <button ng-click="affecterGroupeCommande()" class="btn btn-info btn-sm pull-right">affecter</button>
                                                                                            </div>
                                                                                        </td>
                                                                                    </tr>
                                                                                </tfoot>-->
                                    </table>
                                    <dir-pagination-controls
                                        max-size="5"
                                        direction-links="true"
                                        boundary-links="true"  style="float: right;top: -28px;position: relative;" class="portlet-body">
                                    </dir-pagination-controls>
                                    <!--                                        <div>
                                                                                <button ng-click="affecterGroupeCommande()" class="btn btn-info btn-sm">affecter</button>
                                                                            </div>  -->
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="clearfix"></div>
                </div>
            </div>
            <!--<div class="clearfix"></div>-->
        </div>
        <!-- END EXAMPLE TABLE PORTLET--> 
    </div>
</div>
<div id="login-box" class="login-popup" data-id="" data-index="" data-client="" ng-controller="ModalCommandeCtrl">
    <a href="#" class="close"><img src="{{closeUrl}}" class="btn_close" title="Close Window" alt="Close" /></a>
    <form method="post" class="signin" action="#">
        <fieldset class="textbox">
            <label class="password">
                <span>Code Validation</span>
                <input id="codeRoot" ng-model="codeRoot" value="" type="password" placeholder="Code Validation">
            </label>
            <button class="submit button" type="button" ng-click="validateAction($event)">Activer</button>
        </fieldset>
    </form>
</div>
<script type="text/ng-template" id="DeleteCommande.html">
    <div class="modal-dialog" id="DeleteCommande" data-id="" data-index="">
    <div class="modal-content">
    <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
    <h4 class="modal-title">Supprimé commande</h4>
    </div>
    <div class="modal-body">
    <strong id="name_client"></strong>
    <p>Voulez vous vraiment supprimé cette commande ?</p>
    </div>
    <div class="modal-footer">
    <button type="button" class="btn btn-default" data-dismiss="modal" ng-click="cancel()">Close</button>
    <button type="button" class="btn btn-danger" ng-click="deleteCommande(commande.Commande.id)">
    <i class="fa fa-check" ></i> Supprimé</button>
    </div>
    </div>
    </div>
</script>

<!-- END MAIN CONTENT -->
<script>
//    ComponentsDateTimePickers.init(); // init todo page
</script>
<script type="text/ng-template" id="myModalAffectCommande.html">
    <div class="modal-header" id="modal-affecter-commande" data-cmdid="" data-index="">
    <h3 class="modal-title">Commande : <span id="titleCommande1">{{commandeBarrecodeAffect.Commande.ref}}<span></h3>
    <div id="LinkAffect" style="float: right;" ng-click="cancel()"></div>
    </div>
    <div class="modal-body" ng-controller="EspaceClientController">
    <div class="col-md-12 col-xs-12 portlets" style="width: 100%; background: #fff;">
    <div  class="col-xs-12">
    <strong style="color:#26619C;" class="DateCommande"> 
    <div class="image" style="/* margin-left: 53px; */">
    <img src="assets/pages/img/logo-chams.png" class="pull-left img-responsive logo-amyevolut" style="max-width:150px;margin-left: 15px;">
    </div>
    <h3 class="text-center" style="color: #24445c;"><strong my-current-time="formatCreated"></strong> </strong><br>
    </div>
    <div  class="col-xs-12" style="border-bottom: solid 2px;">
    <div  class="col-xs-3 expediteur">
    <h4><strong style="color:#26619C;"> Expéditeur : {{commandeBarrecodeAffect.Commande.ref}}</strong></h4>
    <address class="text-center" style="font-size: 12px;text-align: left;">
    <p style="color:#26619C;"><strong>Nom :  </strong> <span id="ExpediteurName">{{commandeBarrecodeAffect.User.full_name}}</span></p>
    <p style="color:#26619C;"><strong>Téléphone :  </strong> <span id="ExpediteurPhone">{{commandeBarrecodeAffect.User.phone}}</span></p>
    <p style="color:#26619C;"><strong>Email :  </strong> <span id="ExpediteurEmail">{{commandeBarrecodeAffect.User.email}}</span></p>
    <p style="color:#26619C;"><strong>Adresse :  </strong> <span id="ExpediteurAdresse">{{commandeBarrecodeAffect.User.adress}}</span></p>
    <p style="color:#26619C;"><strong>Ville :  </strong> <span id="ExpediteurVille">{{commandeBarrecodeAffect.User.Ville.name}}</span></p>
    </address>
    </div>
    <div  class="col-xs-3 expediteur1" style="float: right">
    <h4><strong style="color:#26619C;"> Destinataire : </strong></h4>
    <address class="text-center" style="font-size: 12px;text-align: left;">
    <p style="color:#26619C;"><strong>Nom :  </strong> <span id="ReceiverName"></span></p>
    <p style="color:#26619C;"><strong>Téléphone :  </strong> <span  id="ReceiverPhone"></span></p>
    <p style="color:#26619C;"><strong>Email :  </strong> <span  id="ReceiverEmail"></span></p>
    <p style="color:#26619C;"><strong>Ville :  </strong> <span id="ReceiverAdresse"></span></p>
    </address>
    </div>
    </div>
    <div  class="col-xs-12" style="border-bottom: solid 2px;padding-top: 10px;padding-left: 0;">
    <div  class="col-xs-12" style="padding-left: 0;" id="IMGCode">
    </div>
    <div  class="col-xs-12" style="margin-top: 30px;padding-left: 0;">
    <p class="col-xs-3"><strong>No.Colis:  </strong> <span id="ReceiverBon"></span></p>
    <!--<p class="col-xs-3"><strong>No.Pieces:  </strong> <span>{{.Bon.length}}</span></p>-->
    <div class="col-xs-12" ng-repeat="(index, colis) in commandeBarrecodeAffect.Bon">
    <p class="col-xs-3"><strong>Colis N° : {{index + 1}}</strong></p>
    <p class="col-xs-3"><strong>Poid:  </strong> <span>{{colis.poid}} kg</span></p>
    <p class="col-xs-6"><strong>Dimensions (L x W x H):  </strong> <span>{{colis.longueur}} cm {{colis.largeur}} cm {{colis.hauteur}} cm</span></p>
    </div>
    </div>
    </div>
    <div class="clearfix"></div>
    </div>
    <div class="clearfix"></div>
    </div>
    <div class="clearfix"></div>
    <div class="modal-footer">

    <button class="btn btn-warning" type="button" ng-click="cancel()">Cancel</button>
    </div>        
</script>
<script type="text/ng-template" id="myCommandeDepot.html">
    <div class="modal-header" id="modal-commande-depot" data-cmdid="" data-index="">
    <h3 class="modal-title">Valider commande</h3>
    </div>
    <div class="modal-body">
    <div>
    <p><strong><b>Réf.</b> :</strong> <span id="RefCommandeDepot"></span> </p>
    <p><b>Date Demande</b> : <span id="DateCommandeDepot"></span> </p>
    <p><b>Expéditeur</b> : <span id="UserNameDepot"></span> </p>
    <p><b>Adresse | Ville</b> : <span id="AdressUserDepot"></span> </p> 
    </div>
    <div class="modal-footer">
    <button class="btn btn-primary" type="button" ng-click="ValidateCommande()">Valider</button>
    <button class="btn btn-warning" type="button" ng-click="cancel()">Cancel</button>
    </div>

</script>
<script type="text/ng-template" id="myAnnuleCommande.html">
    <div class="modal-header" id="modal-commande-annulee" data-cmdid="" data-index="">
    <h3 class="modal-title">Annulée commande</h3>
    </div>
    <div class="modal-body">
    <div>
    <p><strong><b>Réf.</b> :</strong> <span id="RefCommandeAnnulee"></span> </p>
    <p><b>Date Demande</b> : <span id="DateCommandeAnnulee"></span> </p>
    <p><b>Expéditeur</b> : <span id="UserNameAnnulee"></span> </p>
    <p><b>Adresse | Ville</b> : <span id="AdressUserAnnulee"></span> </p> 
    </div>
    <div class="modal-footer">
    <button class="btn btn-primary" type="button" ng-click="ValidateAnnulationCommande()">Annuler</button>
    <button class="btn btn-warning" type="button" ng-click="cancel()">Cancel</button>
    </div>

</script>
<script src="/js/espace-client/espaceclient.js"></script>
<script src="/js/rootAccess.js"></script>
<script>
//    console.clear();
    var intervalCLIENTESPACE = setInterval(function () {
        if (document.readyState === 'complete') {
            clearInterval(intervalCLIENTESPACE);
            setTimeout(function () {
                $('.selectpicker').selectpicker({
                    style: ' btn-default',
                    size: 12
                });
                function setCurrentTab() {
                    $("ul.nav li a").on('click', function () {
                        console.log($(this).attr('data-target'));
                        sessionStorage.setItem('currentTab', $(this).attr('data-target'));
                    });
                }
                setCurrentTab();
            }, 1000);
            //transportView();
        }
    }, 100);
//            }, 100);
</script>