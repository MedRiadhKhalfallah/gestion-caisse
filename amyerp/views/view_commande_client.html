<!-- BEGIN PAGE BREADCRUMB -->
<style>
    @media print {
        #footer{ 
            display: block !important;
            font-size: 9px !important;
            position: fixed; 
            bottom: 5px;
            left: 60px;
        }
        .Condition{display: none !important;}
        .PourcentageDevis{display: none !important;}
        .merci{display: none !important;}
        table, .table-bordered, .table-bordered>tbody>tr>td, .table-bordered>tbody>tr>th, 
        .table-bordered>tfoot>tr>td, 
        .table-bordered>tfoot>tr>th, 
        .table-bordered>thead>tr>td, 
        .table-bordered>thead>tr>th{
            border: 1px solid #adabab !important;
        }
        .no-print{
            display: none !important;
            width: 0 !important;
            height: 0 !important;

        }
        body{
            height: 100% !important;
            width: 100% !important;
        }
        html{
            height: 100% !important;
            width: 100% !important;
            /*border: 2px solid #000 !important;*/
        }
        @page
        { 
            margin: 2.5mm 2.5mm 2.5mm 2.5mm; 
        }
        .portlets{
            margin: 0 !important;
            margin-top: -20px !important;
        }
        .RetenuText{
            margin-top: -20px !important;
        }
        .RetenuText1{
            margin-top: -30px !important;
        }
        main-content, main-content-inner, .portlet{
            width: 100% !important
        }
        .retenu, .certificat{
            font-size: 12px !important; 
        }
        .logo-amyevolut{
            max-width: 350px !important;
            margin-left: 0 !important;
            position: relative;
            left: 5px !important;
        }
        .image{margin-left: 0 !important;}
        .portlet.box.green-turquoise{border: none !important;}
        html{border: solid 2px;}
        .expediteur{padding-left: 5px !important;margin-left: 0px !important;  width: 46% !important;}
        .expediteur strong{color:#26619C !important;}
        .expediteur span{color:#26619C !important;}
        .expediteur1{padding-left: 100px !important;margin-left: 12px !important; width: 52% !important;margin-top: -15px;}
        .expediteur1 strong{color:#26619C !important;}
        .expediteur1 span{color:#26619C !important;}
        .colorContact strong{color:#26619C !important;}
        .colorContact span{color:#26619C !important;}
        .DateCommande{
            color: #26619C !important;
            position: relative;
            right: 80px;
            font-size: 14px !important;
        }
        .DateCommande strong{
            color: #26619C !important;
        }
        .DateCommande h3{
            color: #26619C !important;
        }
        .border-client{
            border: solid #000 2px !important;
            height: 65px !important;
            width: 21% !important;
        }
        .border-client11{
            border: solid #000 2px !important;
            height: 65px !important;
            width: 16% !important;
        }
        .border-entree{
            border: solid #000 2px !important;
            height: 130px !important;
        }
        .border-date{
            border: solid #000 2px !important;
            height: 60px !important;
        }
        .print{display: block !important;}
        .plusGrand{font-size: 19px; font-weight: bold;}
        .grandExpediteur{font-size: 16px !important; font-weight: bold;}
    }
    .qrcode{width: 120px !important;}
</style>
<!-- END PAGE BREADCRUMB -->
<!-- BEGIN MAIN CONTENT -->
<!--<div class="main-content">
    <div class="main-content-inner">
         BEGIN EXAMPLE TABLE PORTLET
        <div class="portlet">-->
<div class="portlet box green-turquoise" id="refCommande" data-ref="{{commande.Commande.ref}}">
    <div class="portlet-title no-print">
        <div style="width: 50px;float: left !important;" class="actions">
            <a href="javascript:history.go(-1)" class="btn btn-default btn-sm">
                <i class="fa fa-2x fa-arrow-left" aria-hidden="true"></i> 
            </a>
        </div>
        <div class="caption">
            <i class="fa fa-cogs"></i>Commande : {{commande.Commande.ref}}
        </div> 
        <div class="actions">
            <a class="no-print btn btn-success btn-sm" style="margin-right: 10px;background-color: transparent;border-color: #fff;" onclick=""><i class="fa fa-send-o"></i> Envoyer par mail </a>
            <a class="no-print btn btn-success btn-sm" style="margin-right: 10px;background-color: transparent;border-color: #fff;" onclick="print('block_border')"><i class="fa fa-print"></i> Imprimer </a>
            <button class="no-print btn btn-primary btn-sm" style="background-color: transparent;border-color: #fff;" onclick="generatePDF()"><i class="fa fa-file-pdf-o"></i> Exporter en PDF </button>
            <a href="#/dashboard.html" class="btn btn-default btn-sm">
                <i class="fa fa-align-right"></i> Dashboard
            </a>
            <!--            <a href="#/app-gestion-commercials" class="btn btn-default btn-sm">
                            <i class="fa fa-align-right"></i> Gestion commerciale
                        </a>-->
            <a href="#/module-transporteur" class="btn btn-default btn-sm">
                <i class="fa fa-align-right"></i> Transporteur
            </a> 
            <a href="javascript:history.go(+1)" class="btn btn-default btn-sm">
                <i class="fa fa-2x fa-arrow-right" aria-hidden="true"></i> 
            </a>
        </div>
    </div>
    <div class="portlet-body" style="">
        <div class="col-md-12 col-xs-12 portlets" style="width: 100%; background: #fff;">
            <div  class="col-xs-12">
                <div class="image col-xs-7" style="/* margin-left: 53px; */">
                    <img src="assets/pages/img/logo-chams-horizontale.jpg" class="pull-left img-responsive logo-amyevolut" style="max-width:350px;margin-left: 15px;">
                </div>
                <div class="col-xs-5 colorContact" data-ng-controller="ErpCtrl" style="position: relative;top: 50px;">
                    <address><p style="color:#26619C;"><strong style="color:#26619C;">Téléphone :  </strong> <span style="color:#26619C;">{{config.Configuration.telephone_1}}</span></p></address>
                </div>
            </div>
            <div  class="col-xs-12" style="border-bottom: solid 2px;">
                <div  class="image col-xs-6 expediteur" style="margin-left: 5px;">
                    <h4><strong style="color:#26619C;"> Expéditeur : </strong></h4>
                    <address class="text-center grandExpediteur" style="font-size: 14px; font-weight: bold;text-align: left;">
                        <p style="color:#26619C;" ng-if="commande.User.raison_social != null"><strong>Raison sociale  :  </strong> <span>{{commande.User.raison_social}}</span></p>
                        <p style="color:#26619C;" ng-if="commande.User.nom_commercial != null"><strong>Nom Commercial  :  </strong> <span>{{commande.User.nom_commercial}}</span></p>
                        <p style="color:#26619C;"><strong>Nom et Prénom:  </strong> <span>{{commande.User.full_name}}</span></p>
                        <p style="color:#26619C;"><strong>Téléphone :  </strong> <span>{{commande.User.phone}}</span></p>
                        <p style="color:#26619C;"><strong>Email :  </strong> <span>{{commande.User.email}}</span></p>
                        <p style="color:#26619C;"><strong>Adresse d'expédition :  </strong> <span>{{commande.Commande.point_depot}}</span></p>
                        <p style="color:#26619C;"><strong>Ville :  </strong> <span>{{commande.User.Ville.name}}</span></p>
                    </address>
                </div>
                <div  class="col-xs-5 expediteur1">
                    <h4><strong style="color:#26619C;"> Destinataire : </strong></h4>
                    <address class="text-center" style="font-size: 14px;text-align: left;line-height: 12px;">
                        <p style="color:#26619C;"><strong>Nom :  </strong> <strong>{{commande.Receiver.full_name}}</strong></p>
                        <p style="color:#26619C;"><strong>Téléphone :  </strong> <strong class="plusGrand">{{commande.Receiver.phone}}</strong></p>
                        <p style="color:#26619C;" ng-if="commande.Receiver.email != ''"><strong>Email :  </strong> <strong>{{commande.Receiver.email}}</strong></p>
                        <p style="color:#26619C;"><strong>Adresse :  </strong> <strong style="line-height: 27px;">{{commande.Receiver.adresse}}</strong></p>
                        <p style="color:#26619C;margin-top: -10px;"><strong>Ville :  </strong> <strong>{{commande.Receiver.Ville.name}}</strong> </p>
                        <p style="color:#26619C;"><strong>Délégation :  </strong> <strong class="plusGrand">{{commande.Receiver.Delegation.name}}</strong> </p>
                        <p style="color:#26619C;"><strong>Localité :  </strong> <strong>{{commande.Receiver.Localite.name}}</strong> </p>
                        <p style="color:#26619C;"><strong>Code postal :  </strong> <strong>{{commande.Receiver.code_postal}}</strong> </p>
                    </address>
                </div>
                <div class="col-xs-12" style="margin-top: -20px;">
                    <strong style="color:#26619C;" class="DateCommande"></strong><h3 style="color: #24445c; text-align: right !important;">Tunis le :  <strong my-current-time="formatCreated1"></strong><br>
                        </div>
                        </div>
                        <div  class="col-xs-12" style="padding-top: 10px;padding-left: 0;border-bottom: solid 2px;">
                            <div  class="col-xs-12" style="padding-left: 0;">
                                <svg id="barcode" class="col-xs-7" style="width: 260px !important;"></svg>
                                <img src='https://chart.googleapis.com/chart?cht=qr&chl={{commande.Commande.ref}}&chs=180x180&choe=UTF-8&chld=L|2' class="imgQRCode" style="float: right; position: relative; right: 15% !important;">
                                <!--<qrcode data="{{commande.Commande.ref}}" class="col-xs-4" style='margin-top: 25px;'></qrcode>-->
                            </div>
                            <div  class="col-xs-12" style="margin-top: -20px;padding-left: 0; margin-bottom: 10px;">
                                <p class="col-xs-3"><strong>No.Colis:  </strong> <span>{{commande.Bon.length}}</span></p>
                                <!--<p class="col-xs-3"><strong>No.Pieces:  </strong> <span>{{commande.Bon.length}}</span></p>-->
                                <div class="col-xs-12" ng-if='commande.Commande.isContreRembourcement == 1 || commande.Commande.isContreRembourcement == true || commande.Commande.isContreRembourcement == "true"' style="margin-bottom: 10px;">
                                    <div class="col-xs-5" style="padding-left: 0;">
                                        <strong>Contre Remboursement : </strong> 
                                        <strong class="plusGrand" ng-click="editcommandeClient()" id="editcommandeClient">{{commande.Commande.mantant| number:3}}</strong>
                                    </div>
                                    <div class="col-xs-5" style="padding-left: 0;position: relative; top: 5px;">
                                        <strong>   Mode de paiement : </strong> 
                                        <strong>{{commande.Commande.mode_paiement}}</strong>
                                    </div>


                                </div>
                                <div class="clearfix"></div>
                                <div class="col-xs-12" ng-repeat="(index, colis) in commande.Bon">
                                    <p class="col-xs-2" style="padding-left: 0;"><strong>Colis N° : {{index + 1}}</strong></p>
                                    <p class="col-xs-2" style="padding-left: 0;"><strong>Poid:  </strong> <span>{{colis.poid}} kg</span></p>
                                    <p class="col-xs-6" style="padding-left: 0;padding-right: 0;"><strong>Dimensions (L x W x H):  </strong> <span>{{colis.longueur}} cm {{colis.largeur}} cm {{colis.hauteur}} cm</span></p>
                                    <!--<p class="col-xs-3" style="padding-right: 0;"><strong>Description:  </strong> <span>{{colis.content}}</span></p>-->
                                </div>
                            </div>
                        </div>
                        <div class="clearfix"></div>
                </div>
                <div class="col-xs-12" style="margin-top: 20px;">
                    <div class="col-xs-6" style="border: solid #000 2px !important;height: 190px !important; padding: 20px; text-align: left;">
                        <div class="col-xs-12">
                            <strong style="font-size: 16px; text-align: center;" class="col-xs-12" ng-if="commande.Commande.isEchange == true"> Échange </strong> 
                            <strong ng-if="commande.Commande.cause_echange != null" class="col-xs-12"> Déscription de l'échange : {{commande.Commande.cause_echange}}</strong>
                        </div>
                        <div class="col-xs-12" ng-repeat="(index, colis) in commande.Bon" style="margin-top: 5px;">
                            <p class="col-xs-12" style="padding-right: 0;"><strong>Déscription de(s) Colis:  </strong> <span>{{colis.content}}</span></p>
                        </div>
                    </div>
                    <div class="col-xs-offset-3 col-xs-3 print" style="padding-left: 0; padding-right: 0;">
                        <div class="col-xs-12 border-entree" style="text-align: center !important;"><strong class="print" style='display: none;font-family: "Arial Black", Gadget, sans-serif; font-size: 24px;line-height: 50px;padding-top: 5%;'>ENTREE <br> DÉPOT</strong></div>
                        <div class="col-xs-12 border-date"></div>
                    </div>
                </div>
                <div class="col-xs-12 print" style="margin-top: 20px;display: none;">
                    <div class="col-xs-3 border-client11" style="padding-top: 3%; text-align: left; padding-left: 10px;padding-right: 0;"><strong>État Dépôt</strong></div>
                    <div class="col-xs-3 border-client"></div>
                    <div class="col-xs-3 border-client"></div>
                    <div class="col-xs-3 border-client"></div>
                    <div class="col-xs-3 border-client"></div>
                    <div class="col-xs-3 border-client11" style="padding-top: 3%; text-align: left; padding-left: 10px;padding-right: 0;"><strong>État Livraison</strong></div>
                    <div class="col-xs-3 border-client"></div>
                    <div class="col-xs-3 border-client"></div>
                    <div class="col-xs-3 border-client"></div>
                    <div class="col-xs-3 border-client"></div>
                </div>
                <div class="clearfix"></div>
            </div>
        </div>
        <!--    </div>
        </div>-->
        <!--        </div>
            </div>
            <div class="cb no-print"></div><br>
        </div>-->
        <script>
            var intervalBarcode = setInterval(function () {
                var refCommande = $("#refCommande").attr('data-ref').toString();
                console.log(refCommande);
                JsBarcode("#barcode", refCommande);
                var BarcodesScanner = {
                    barcodeData: '',
                    deviceId: '',
                    symbology: '',
                    timestamp: 0,
                    dataLength: 0
                };
                if ($("#barcode").children().length > 0) {
                    clearInterval(intervalBarcode);
                }
            }, 1000);
            var intervalViewCommandeClient = setInterval(function () {
                if (document.readyState === 'complete') {
                    clearInterval(intervalViewCommandeClient);
                    setTimeout(function () {
                        function onScannerNavigate(barcodeData, deviceId, symbology, timestamp, dataLength) {
                            BarcodesScanner.barcodeData = barcodeData;
                            BarcodesScanner.deviceId = deviceId;
                            BarcodesScanner.symbology = symbology;
                            BarcodesScanner.timestamp = timestamp;
                            BarcodesScanner.dataLength = dataLength;
                            $(BarcodesScanner).trigger('scan');
                        }

                        BarcodesScanner.tmpTimestamp = 0;
                        BarcodesScanner.tmpData = '';
                        $(document).on('keypress', function (e) {
                            e.stopPropagation();
                            var keycode = (e.keyCode ? e.keyCode : e.which);
                            if (BarcodesScanner.tmpTimestamp < Date.now() - 500) {
                                BarcodesScanner.tmpData = '';
                                BarcodesScanner.tmpTimestamp = Date.now();
                            }
                            if (keycode == 13 && BarcodesScanner.tmpData.length > 0) {
                                onScannerNavigate(BarcodesScanner.tmpData, 'FAKE_SCANNER', 'WEDGE', BarcodesScanner.tmpTimestamp, BarcodesScanner.tmpData.length);
                                BarcodesScanner.tmpTimestamp = 0;
                                BarcodesScanner.tmpData = '';
                            } else if (e.charCode && e.charCode > 0) {
                                BarcodesScanner.tmpData += String.fromCharCode(e.charCode);
                            }
                        });
                        $(BarcodesScanner).on('scan', function (e) {
                            //$("#ProductCodeBarres").val(BarcodesScanner.barcodeData);
                            alert(BarcodesScanner.barcodeData.replace("°", "-").replace("°", "-"));
                        });
                    }, 1500);

                }
            });
        </script>

